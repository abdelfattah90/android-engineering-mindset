<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <title>Process Death, Tasks & Back Stack - Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f7f8fa;
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --border: #e5e7eb;
      --accent: #2563eb;
      --code-bg: #666666;
      --code-text: #ffffff;
    }

    * {
      box-sizing: border-box;
      font-family: 'Nunito', 'Segoe UI', Tahoma, Arial, sans-serif;
    }

    body {
      margin: 0;
      font-family: 'Nunito', 'Segoe UI', Tahoma, Arial, sans-serif; 
      background: var(--bg);
      color: var(--text);
      line-height: 1.8;
    }

    .page {
      max-width: 980px;
      margin: auto;
      padding: 32px 16px;
    }

    .content {
      background: var(--card);
      border-radius: 12px;
      padding: 32px;
      border: 1px solid var(--border);
    }

    h1, h2, h3, h4 {
      color: #111827;
      margin-top: 32px;
    }

    h1 {
      font-size: 2.1rem;
      border-bottom: 3px solid var(--accent);
      padding-bottom: 8px;
    }

    h2 {
      font-size: 1.6rem;
      border-right: 4px solid var(--accent);
      padding-right: 12px;
    }

    h3 {
      font-size: 1.3rem;
    }

    h4 {
      font-size: 1.1rem;
      color: #374151;
    }

    p {
      margin: 12px 0;
    }

    hr {
      margin: 40px 0;
      border: none;
      height: 1px;
      background: var(--border);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
      font-size: 0.95rem;
    }

    table th,
    table td {
      border: 1px solid var(--border);
      padding: 10px;
      text-align: right;
    }

    table th {
      background: #f1f5f9;
      font-weight: 600;
    }

    ul, ol {
      padding-right: 20px;
    }

    blockquote {
      background: #f1f5f9;
      border-right: 4px solid var(--accent);
      padding: 12px 16px;
      margin: 16px 0;
      color: #374151;
    }

    pre {
      background: var(--code-bg);
      color: var(--code-text);
      padding: 16px;
      border-radius: 10px;
      overflow-x: auto;
      margin: 16px 0;
      font-size: 0.9rem;
      direction: ltr;
      text-align: left;
    }

    code {
      font-family: 'Roboto Mono', 'Courier New', monospace;
    }

    p code {
      background: #eef2ff;
      color: #1e40af;
      padding: 2px 6px;
      border-radius: 6px;
      font-size: 0.85em;
    }

    section {
      margin-bottom: 32px;
    }

    .warning {
      background: #fef2f2;
      border-right: 4px solid #dc2626;
      padding: 12px 16px;
      margin: 16px 0;
      color: #991b1b;
    }

    .success {
      background: #f0fdf4;
      border-right: 4px solid #16a34a;
      padding: 12px 16px;
      margin: 16px 0;
      color: #166534;
    }

    .info {
      background: #eff6ff;
      border-right: 4px solid #2563eb;
      padding: 12px 16px;
      margin: 16px 0;
      color: #1e40af;
    }

    @media (max-width: 600px) {
      .content {
        padding: 20px;
      }

      h1 {
        font-size: 1.7rem;
      }

      h2 {
        font-size: 1.4rem;
      }
    }
  </style>
</head>

<body>
  <div class="page">
    <div class="content">
      <div class="crossnote markdown-preview">
        <div dir="rtl">
          <h1>Process Death, Tasks & Back Stack â˜ ï¸</h1>

          <h2>Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª</h2>
          <p>
            1 - Ù…Ø§ Ù‡Ùˆ Process DeathØŸ<br />
            2 - Ø§Ù„ØªØ´Ø¨ÙŠÙ‡ Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠ: Ø§Ù„Ù…Ø³Ø±Ø­ÙŠØ© ÙˆØ§Ù„Ø§Ù†Ù‚Ø·Ø§Ø¹<br />
            3 - Ù…ØªÙ‰ ÙŠØ­Ø¯Ø« Process DeathØŸ<br />
            4 - Ù…Ø§ ÙŠØ­Ø¯Ø« Ø®Ù„Ø§Ù„ Process Death<br />
            5 - Process Recreation: Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø­ÙŠØ§Ø©<br />
            6 - ÙƒÙŠÙ ØªØ®ØªØ¨Ø± Process DeathØŸ<br />
            7 - Ù…Ø§ Ù‡Ùˆ TaskØŸ<br />
            8 - Back Stack: ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ØŸ<br />
            9 - Launch Modes Ø¨Ø§Ù„ØªÙØµÙŠÙ„<br />
            10 - Intent Flags<br />
            11 - Task Affinity<br />
            12 - Activity vs Task vs Process<br />
            13 - Ø£Ù…Ø«Ù„Ø© Ù…Ø¹Ù‚Ø¯Ø© Ù…Ù† Ø§Ù„ÙˆØ§Ù‚Ø¹<br />
            14 - Ø§Ù„Ø®Ù„Ø§ØµØ© ÙˆØ§Ù„Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
          </p>

          <hr />

          <h2>Ù…Ø§ Ù‡Ùˆ Process DeathØŸ â˜ ï¸</h2>

          <h3>Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ:</h3>

          <blockquote>
            <strong>Process Death:</strong><br />
            Ù‚ØªÙ„ Process Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨ÙˆØ§Ø³Ø·Ø© Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ´ØºÙŠÙ„<br />
            <br />
            <strong>Ù…Ø§Ø°Ø§ ÙŠØ¹Ù†ÙŠØŸ</strong><br />
            â€¢ Process ÙŠØ®ØªÙÙŠ Ù…Ù† Memory ÙÙˆØ±Ø§Ù‹ (< 100ms)<br />
            â€¢ ÙƒÙ„ Activities ØªÙ…ÙˆØª<br />
            â€¢ ÙƒÙ„ Services ØªÙ…ÙˆØª<br />
            â€¢ Application object ÙŠÙ…ÙˆØª<br />
            â€¢ ÙƒÙ„ Threads ØªÙ…ÙˆØª<br />
            â€¢ ÙƒÙ„ Static variables ØªÙÙ…Ø³Ø­<br />
            â€¢ ÙƒÙ„ Singletons ØªÙØ¯Ù…Ø±<br />
            <br />
            <strong>â†’ ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ®ØªÙÙŠØŒ ÙƒØ£Ù† App Ù„Ù… ÙŠØ¹Ù…Ù„ Ø£Ø¨Ø¯Ø§Ù‹!</strong>
          </blockquote>

          <h3>Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Activity Death Ùˆ Process Death:</h3>

          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ø¬Ø§Ù†Ø¨</th>
                <th>Activity Death</th>
                <th>Process Death</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Ù…Ø§ ÙŠÙ…ÙˆØªØŸ</strong></td>
                <td>Activity ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·</td>
                <td>Process Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</td>
              </tr>
              <tr>
                <td><strong>Application</strong></td>
                <td>ÙŠØ¨Ù‚Ù‰ Ø­ÙŠØ§Ù‹ âœ“</td>
                <td>ÙŠÙ…ÙˆØª â˜ ï¸</td>
              </tr>
              <tr>
                <td><strong>Static variables</strong></td>
                <td>ØªØ¨Ù‚Ù‰ âœ“</td>
                <td>ØªÙÙ…Ø³Ø­ â˜ ï¸</td>
              </tr>
              <tr>
                <td><strong>Singletons</strong></td>
                <td>ØªØ¨Ù‚Ù‰ âœ“</td>
                <td>ØªÙØ¯Ù…Ø± â˜ ï¸</td>
              </tr>
              <tr>
                <td><strong>Other Activities</strong></td>
                <td>ØªØ¨Ù‚Ù‰ Ø­ÙŠØ© âœ“</td>
                <td>ØªÙ…ÙˆØª ÙƒÙ„Ù‡Ø§ â˜ ï¸</td>
              </tr>
              <tr>
                <td><strong>onDestroy()</strong></td>
                <td>ÙŠÙØ³ØªØ¯Ø¹Ù‰ (Ø¹Ø§Ø¯Ø©Ù‹)</td>
                <td>Ù„Ø§ ÙŠÙØ³ØªØ¯Ø¹Ù‰! â˜ ï¸</td>
              </tr>
              <tr>
                <td><strong>Ø§Ù„Ø³Ø¨Ø¨</strong></td>
                <td>Rotation, finish(), Back</td>
                <td>Low Memory, Force Stop</td>
              </tr>
              <tr>
                <td><strong>Ø§Ù„ØªÙƒØ±Ø§Ø±</strong></td>
                <td>ÙƒØ«ÙŠØ± Ø¬Ø¯Ø§Ù‹ (ÙŠÙˆÙ…ÙŠ)</td>
                <td>Ù†Ø§Ø¯Ø± Ù†Ø³Ø¨ÙŠØ§Ù‹</td>
              </tr>
            </tbody>
          </table>

          <h3>Ù„Ù…Ø§Ø°Ø§ Process Death Ø®Ø·ÙŠØ±ØŸ</h3>

          <div class="warning">
            <strong>âš ï¸ Process Death = Silent Killer</strong><br />
            <br />
            <strong>Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:</strong><br />
            â€¢ ÙŠØ­Ø¯Ø« Ø¨Ø¯ÙˆÙ† ØªØ­Ø°ÙŠØ± (no callbacks!)<br />
            â€¢ User Ù„Ø§ ÙŠØ¹Ø±Ù Ø£Ù† Ø´ÙŠØ¦Ø§Ù‹ Ø­Ø¯Ø«<br />
            â€¢ App ÙŠØ¨Ø¯Ùˆ "ÙŠØ¹Ù…Ù„" Ù„ÙƒÙ†Ù‡ Ø¨Ø¯Ø£ Ù…Ù† Ø¬Ø¯ÙŠØ¯<br />
            â€¢ State Ø¶Ø§Ø¹ Ø¥Ø°Ø§ Ù„Ù… ØªØ­ÙØ¸Ù‡<br />
            <br />
            <strong>Ù…Ø«Ø§Ù„:</strong><br />
            1. User ÙŠÙ…Ù„Ø£ Form Ø·ÙˆÙŠÙ„<br />
            2. ÙŠØ¶ØºØ· Home (App ÙÙŠ background)<br />
            3. System ÙŠÙ‚ØªÙ„ Process (Low Memory)<br />
            4. User ÙŠØ±Ø¬Ø¹ Ù„Ù„Ù€ App<br />
            5. Form ÙØ§Ø±Øº! ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¶Ø§Ø¹Øª! ğŸ’”<br />
            <br />
            <strong>â†’ User frustrated â†’ 1-star review â†’ Uninstall</strong>
          </div>

          <hr />

          <h2>Ø§Ù„ØªØ´Ø¨ÙŠÙ‡ Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠ: Ø§Ù„Ù…Ø³Ø±Ø­ÙŠØ© ÙˆØ§Ù„Ø§Ù†Ù‚Ø·Ø§Ø¹ ğŸ­</h2>

          <h3>ØªØ®ÙŠÙ„ Ù…Ø³Ø±Ø­ÙŠØ© Ø­ÙŠØ©:</h3>

          <div dir="ltr">
            <pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Theater Performance                 â”‚
â”‚                (Android Application)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  ACT 1: Normal Performance                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Stage: MainActivityØ¨ÙˆØ§Ø³Ø·Ø©              â”‚          â”‚
â”‚  â”‚ Actors: Fragments, Views                â”‚          â”‚
â”‚  â”‚ Props: Data, State                      â”‚          â”‚
â”‚  â”‚ Building: Process (Power ON)            â”‚          â”‚
â”‚  â”‚ [Performance ongoing...]                â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                      â”‚
â”‚  â”€â”€â”€ Intermission (User presses Home) â”€â”€â”€            â”‚
â”‚                                                      â”‚
â”‚  ACT 2: Intermission                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Curtain closed (Activity stopped)       â”‚          â”‚
â”‚  â”‚ Actors backstage (Activities in memory) â”‚          â”‚
â”‚  â”‚ Building still powered (Process cached) â”‚          â”‚
â”‚  â”‚ Waiting for Act 2...                    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                      â”‚
â”‚  â”€â”€â”€ Power Outage! (Process Death) â”€â”€â”€               â”‚
â”‚                                                      â”‚
â”‚  DISASTER: Power Cut (SIGKILL)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ğŸ’¡ LIGHTS OUT! (< 100ms)                â”‚          â”‚
â”‚  â”‚ â€¢ Building loses power (Process killed) â”‚          â”‚
â”‚  â”‚ â€¢ Actors disappear (Activities gone)    â”‚          â”‚
â”‚  â”‚ â€¢ Props vanish (State lost)             â”‚          â”‚
â”‚  â”‚ â€¢ Everything in darkness â˜ ï¸             â”‚          â”‚
â”‚  â”‚                                         â”‚          â”‚
â”‚  â”‚ No chance to:                           â”‚          â”‚
â”‚  â”‚ âŒ Save props properly                  â”‚          â”‚
â”‚  â”‚ âŒ Tell actors what happened            â”‚          â”‚
â”‚  â”‚ âŒ Record current scene                 â”‚          â”‚
â”‚  â”‚                                         â”‚          â”‚
â”‚  â”‚ It just... ends.                        â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                      â”‚
â”‚  â”€â”€â”€ Audience Returns (User comes back) â”€â”€â”€          â”‚
â”‚                                                      â”‚
â”‚  RESTORATION: Emergency Recovery                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ 1. Power restored (New Process)         â”‚          â”‚
â”‚  â”‚ 2. Stage rebuilt from blueprints        â”‚          â”‚
â”‚  â”‚    (Activity recreation)                â”‚          â”‚
â”‚  â”‚ 3. Props found from emergency save      â”‚          â”‚
â”‚  â”‚    (savedInstanceState)                 â”‚          â”‚
â”‚  â”‚ 4. Actors try to remember scene         â”‚          â”‚
â”‚  â”‚    (ViewModel, if exists)               â”‚          â”‚
â”‚  â”‚                                         â”‚          â”‚
â”‚  â”‚ IF saved properly: Continue smoothly âœ“  â”‚          â”‚
â”‚  â”‚ IF not saved: Start from beginning âŒ   â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Key Lessons:
1. Power outage = No warning, instant
2. Everything lost except emergency saves
3. Audience (User) expects continuity
4. Good theater = Good emergency plans</pre>
          </div>

          <blockquote>
            <strong>ğŸ¯ Ø§Ù„Ø¯Ø±ÙˆØ³:</strong><br />
            1. <strong>No Warning:</strong> Process Death ÙØ¬Ø§Ø¦ÙŠ (SIGKILL)<br />
            2. <strong>Total Loss:</strong> ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ®ØªÙÙŠ<br />
            3. <strong>User Expectation:</strong> User ÙŠØªÙˆÙ‚Ø¹ Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±<br />
            4. <strong>Emergency Save:</strong> onSaveInstanceState() + ViewModel<br />
            5. <strong>Recovery:</strong> onCreate(savedInstanceState) ÙŠØ³ØªØ±Ø¬Ø¹<br />
            6. <strong>Transparent:</strong> User ÙŠØ¬Ø¨ Ø£Ù„Ø§ ÙŠÙ„Ø§Ø­Ø¸ Ø´ÙŠØ¦Ø§Ù‹!
          </blockquote>

          <hr />

          <h2>Ù…ØªÙ‰ ÙŠØ­Ø¯Ø« Process DeathØŸ â°</h2>

          <h3>Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:</h3>

          <h4>1. Low Memory Killer (Ø§Ù„Ø£ÙƒØ«Ø± Ø´ÙŠÙˆØ¹Ø§Ù‹):</h4>

          <div dir="ltr">
            <pre>Scenario: User multitasking heavily

Timeline:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ T=0s:   User using Your App               â”‚
â”‚         â€¢ OOM Adj: -800 (Foreground)       â”‚
â”‚         â€¢ Safe âœ“                           â”‚
â”‚                                            â”‚
â”‚ T=10s:  User presses Home                  â”‚
â”‚         â€¢ Your App: onPause â†’ onStop       â”‚
â”‚         â€¢ OOM Adj: 400 (Background)        â”‚
â”‚         â€¢ Vulnerable!                      â”‚
â”‚                                            â”‚
â”‚ T=20s:  User opens Chrome                 â”‚
â”‚         â€¢ Chrome loads 20 tabs (RAM hog!)  â”‚
â”‚         â€¢ Free RAM: 300 MB â†’ 150 MB        â”‚
â”‚                                            â”‚
â”‚ T=30s:  User opens Camera                 â”‚
â”‚         â€¢ Camera needs 200 MB              â”‚
â”‚         â€¢ Free RAM: 150 MB (NOT ENOUGH!)   â”‚
â”‚                                            â”‚
â”‚ T=31s:  Low Memory Killer activates! ğŸ”ª   â”‚
â”‚         â€¢ Scans processes by OOM Adj       â”‚
â”‚         â€¢ Your App (OOM=400) selected      â”‚
â”‚         â€¢ SIGKILL sent                     â”‚
â”‚         â€¢ Process dies (< 100ms)           â”‚
â”‚         â€¢ RAM freed: 150 MB â†’ 250 MB âœ“     â”‚
â”‚                                            â”‚
â”‚ T=60s:  User returns to Your App          â”‚
â”‚         â€¢ Process dead â†’ Cold Start        â”‚
â”‚         â€¢ Application.onCreate() again     â”‚
â”‚         â€¢ Activity.onCreate(savedInstanceState)â”‚
â”‚         â€¢ IF state saved: Good âœ“           â”‚
â”‚         â€¢ IF not saved: Data lost âŒ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frequency: Very common!
â€¢ Happens daily on mid/low-end devices
â€¢ More likely with heavy multitasking
â€¢ Inevitable on devices with < 4 GB RAM</pre>
          </div>

          <h4>2. User Force Stop:</h4>

          <div dir="ltr">
            <pre>User Action: Settings â†’ Apps â†’ Your App â†’ Force Stop

Result:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. User clicks "Force Stop"                â”‚
â”‚ 2. System sends SIGKILL immediately        â”‚
â”‚ 3. Process dies (< 50ms)                   â”‚
â”‚ 4. All Activities/Services killed          â”‚
â”‚ 5. Removed from Recent Apps                â”‚
â”‚ 6. Next launch: Cold Start                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

When Users do this:
â€¢ App misbehaving (battery drain, crashes)
â€¢ Following online "speed up phone" guides
â€¢ Trying to fix perceived issues

Result:
â€¢ Complete reset (like first install)
â€¢ All cached data may be cleared
â€¢ Next launch: Clean slate</pre>
          </div>

          <h4>3. Developer Options: "Don't keep activities":</h4>

          <div dir="ltr">
            <pre>Setting: Developer Options â†’ Don't keep activities

Behavior:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EVERY time Activity goes to background:    â”‚
â”‚ â””â”€â†’ Process killed immediately!            â”‚
â”‚                                            â”‚
â”‚ Example:                                   â”‚
â”‚ User in Activity A                         â”‚
â”‚ â””â”€â†’ Opens Activity B                       â”‚
â”‚     â””â”€â†’ A goes to background               â”‚
â”‚         â””â”€â†’ Process killed! â˜ ï¸             â”‚
â”‚             (if only A was in Process)     â”‚
â”‚                                            â”‚
â”‚ User presses Back                          â”‚
â”‚ â””â”€â†’ A must be recreated                    â”‚
â”‚     â””â”€â†’ onCreate(savedInstanceState)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Purpose: Testing tool!
â€¢ Simulates aggressive memory conditions
â€¢ Forces Process Death on every navigation
â€¢ CRITICAL for testing state save/restore
â€¢ Every developer MUST test with this ON!</pre>
          </div>

          <h4>4. Background Time Limit:</h4>

          <div dir="ltr">
            <pre>Android 8+ Background Execution Limits

Timeline:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ T=0min:   App goes to background           â”‚
â”‚           â€¢ Service running                â”‚
â”‚           â€¢ Process state: Background      â”‚
â”‚                                            â”‚
â”‚ T=1min:   Warning (conceptually)           â”‚
â”‚           â€¢ System monitoring              â”‚
â”‚                                            â”‚
â”‚ T=5min:   Time limit reached!              â”‚
â”‚           â€¢ Service killed (stopService)   â”‚
â”‚           â€¢ If no other components:        â”‚
â”‚             â””â”€â†’ Process killed! â˜ ï¸         â”‚
â”‚                                            â”‚
â”‚ Exception: Foreground Service              â”‚
â”‚ â””â”€â†’ Can run indefinitely (with notification)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Affected:
â€¢ Started Services (startService)
â€¢ Not affected: Foreground Services, Jobs

Prevention:
â€¢ Use WorkManager
â€¢ Use Foreground Service (with notification)
â€¢ Don't rely on background Services</pre>
          </div>

          <h4>5. System Reboot/Update:</h4>

          <div dir="ltr">
            <pre>System Events:

1. Device Reboot:
   â€¢ All processes killed
   â€¢ Clean slate on next boot

2. System Update:
   â€¢ Device reboots
   â€¢ All apps killed

3. App Update:
   â€¢ Process killed before update
   â€¢ Fresh start after update

4. Airplane Mode / Network Changes:
   â€¢ May trigger process kills on some devices
   â€¢ Especially if doing network work</pre>
          </div>

          <h3>Ø§Ø­ØªÙ…Ø§Ù„ÙŠØ© Process Death:</h3>

          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                <th>Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„</th>
                <th>Ù…ØªÙ‰ØŸ</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Foreground</strong></td>
                <td>< 1%</td>
                <td>ÙÙ‚Ø· ÙÙŠ Ø­Ø§Ù„Ø§Øª Ø·Ø§Ø±Ø¦Ø©</td>
              </tr>
              <tr>
                <td><strong>Background (< 1 min)</strong></td>
                <td>5-10%</td>
                <td>Heavy multitasking</td>
              </tr>
              <tr>
                <td><strong>Background (5 min)</strong></td>
                <td>20-30%</td>
                <td>Low memory devices</td>
              </tr>
              <tr>
                <td><strong>Background (30 min)</strong></td>
                <td>50-70%</td>
                <td>Ù…Ø¹Ø¸Ù… Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</td>
              </tr>
              <tr>
                <td><strong>Cached (hours)</strong></td>
                <td>90%+</td>
                <td>ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ Ù…Ø¤ÙƒØ¯</td>
              </tr>
              <tr>
                <td><strong>Don't keep activities</strong></td>
                <td>100%</td>
                <td>ÙƒÙ„ navigation!</td>
              </tr>
            </tbody>
          </table>

          <hr />

          <h2>Ù…Ø§ ÙŠØ­Ø¯Ø« Ø®Ù„Ø§Ù„ Process Death ğŸ’€</h2>

          <h3>Ø§Ù„ØªØ³Ù„Ø³Ù„ Ø§Ù„Ø²Ù…Ù†ÙŠ Ø§Ù„Ø¯Ù‚ÙŠÙ‚:</h3>

          <div dir="ltr">
            <pre>Process Death Sequence (< 100ms total):

T=0ms: Low Memory Killer decision
       â””â”€â†’ Target Process selected (Your App)

T=1ms: SIGKILL signal sent
       â””â”€â†’ Kernel signal to Process

T=2ms: Process receives signal
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ NO CHANCE TO:                     â”‚
       â”‚ âŒ Call onDestroy()               â”‚
       â”‚ âŒ Save unsaved data              â”‚
       â”‚ âŒ Close file handles             â”‚
       â”‚ âŒ Cleanup resources              â”‚
       â”‚ âŒ Notify other components        â”‚
       â”‚                                   â”‚
       â”‚ Just... instant termination       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

T=5ms: Memory cleanup begins
       â€¢ All Pages unmapped
       â€¢ Memory returned to System
       â€¢ Process entry removed

T=50ms: Cleanup complete
        â€¢ Process fully removed from memory
        â€¢ All references gone
        â€¢ Like it never existed

T=100ms: System stable
         â€¢ Memory reclaimed
         â€¢ Available for other apps
         â€¢ Your App = completely erased

What's Lost:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â˜ ï¸ Application instance                â”‚
â”‚ â˜ ï¸ All Activity instances               â”‚
â”‚ â˜ ï¸ All Service instances                â”‚
â”‚ â˜ ï¸ All Thread objects                   â”‚
â”‚ â˜ ï¸ All Static variables                 â”‚
â”‚ â˜ ï¸ All Singletons                       â”‚
â”‚ â˜ ï¸ In-memory caches                     â”‚
â”‚ â˜ ï¸ Network connections                  â”‚
â”‚ â˜ ï¸ File handles                         â”‚
â”‚ â˜ ï¸ Everything in RAM                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

What Survives:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ savedInstanceState Bundles           â”‚
â”‚   (saved by ActivityManager before)    â”‚
â”‚ âœ“ Files on disk                        â”‚
â”‚ âœ“ SharedPreferences                    â”‚
â”‚ âœ“ Database                             â”‚
â”‚ âœ“ Task/Back Stack structure            â”‚
â”‚   (maintained by System)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
          </div>

          <h3>Before vs After Process Death:</h3>

          <div dir="ltr">
            <pre>BEFORE Process Death:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Process (PID: 12345)                     â”‚
â”‚ â”œâ”€ Application instance                 â”‚
â”‚ â”‚  â””â”€ Singletons, global state          â”‚
â”‚ â”‚                                        â”‚
â”‚ â”œâ”€ Activity A (stopped, in back stack)  â”‚
â”‚ â”‚  â””â”€ Views, local state                â”‚
â”‚ â”‚                                        â”‚
â”‚ â”œâ”€ Activity B (stopped, in back stack)  â”‚
â”‚ â”‚  â””â”€ Views, local state                â”‚
â”‚ â”‚                                        â”‚
â”‚ â”œâ”€ Activity C (stopped, in back stack)  â”‚
â”‚ â”‚  â””â”€ Views, local state                â”‚
â”‚ â”‚                                        â”‚
â”‚ â””â”€ Static variables                     â”‚
â”‚    â””â”€ DataManager.cache = [data]        â”‚
â”‚                                          â”‚
â”‚ Memory: 150 MB                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AFTER Process Death:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Process: DOES NOT EXIST â˜ ï¸               â”‚
â”‚                                          â”‚
â”‚ Everything is GONE                       â”‚
â”‚                                          â”‚
â”‚ BUT:                                     â”‚
â”‚ System remembers:                        â”‚
â”‚ â€¢ Task structure (A â†’ B â†’ C)            â”‚
â”‚ â€¢ savedInstanceState for each Activity  â”‚
â”‚ â€¢ Which Activity was on top             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User perspective:
â€¢ Presses app icon or Returns
â€¢ Expects to see Activity C (where they left off)
â€¢ System must recreate entire chain! A â†’ B â†’ C</pre>
          </div>

          <hr />

          <h2>Process Recreation: Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø­ÙŠØ§Ø© ğŸ”„</h2>

          <h3>Ù…Ø§ ÙŠØ­Ø¯Ø« Ø¹Ù†Ø¯ Ø¹ÙˆØ¯Ø© User:</h3>

          <div dir="ltr">
            <pre>Recreation Sequence:

User returns to App (e.g., from Recent Apps):

Step 1: System checks Process
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Process exists?                        â”‚
â”‚ â”œâ”€â†’ YES: Resume Activities (fast!)    â”‚
â”‚ â””â”€â†’ NO: Must recreate! (slow)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2: Task Structure Restoration
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ System remembers Task:                 â”‚
â”‚ â€¢ Activity A (bottom)                  â”‚
â”‚ â€¢ Activity B (middle)                  â”‚
â”‚ â€¢ Activity C (top)                     â”‚
â”‚                                        â”‚
â”‚ Decision: Recreate entire stack!       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 3: Process Creation
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ T=0ms:   Zygote fork (new Process)     â”‚
â”‚          â””â”€â†’ PID: 67890 (different!)   â”‚
â”‚                                        â”‚
â”‚ T=50ms:  Application.onCreate()        â”‚
â”‚          â””â”€â†’ Initialize singletons     â”‚
â”‚              (from scratch!)           â”‚
â”‚                                        â”‚
â”‚ T=100ms: Singletons reinitialized      â”‚
â”‚          â””â”€â†’ Static vars = default     â”‚
â”‚              Cache = empty             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 4: Activities Recreation
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Activity A:                            â”‚
â”‚ â”œâ”€â†’ onCreate(savedInstanceState)       â”‚
â”‚ â”‚   â””â”€â†’ Restore from Bundle           â”‚
â”‚ â”œâ”€â†’ onStart()                          â”‚
â”‚ â””â”€â†’ onRestoreInstanceState()           â”‚
â”‚     (NOT onResume - not top!)          â”‚
â”‚                                        â”‚
â”‚ Activity B:                            â”‚
â”‚ â”œâ”€â†’ onCreate(savedInstanceState)       â”‚
â”‚ â”œâ”€â†’ onStart()                          â”‚
â”‚ â””â”€â†’ onRestoreInstanceState()           â”‚
â”‚                                        â”‚
â”‚ Activity C (top of stack):             â”‚
â”‚ â”œâ”€â†’ onCreate(savedInstanceState)       â”‚
â”‚ â”œâ”€â†’ onStart()                          â”‚
â”‚ â”œâ”€â†’ onRestoreInstanceState()           â”‚
â”‚ â””â”€â†’ onResume() â† Now user sees this!  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 5: Final State
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ New Process (PID: 67890)               â”‚
â”‚ â”œâ”€ Application instance (NEW)          â”‚
â”‚ â”œâ”€ Activity A (NEW instance)           â”‚
â”‚ â”œâ”€ Activity B (NEW instance)           â”‚
â”‚ â”œâ”€ Activity C (NEW instance, visible)  â”‚
â”‚ â””â”€ Static variables (reinitialized)    â”‚
â”‚                                        â”‚
â”‚ Total time: 500-2000ms (visible lag!)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
          </div>

          <h3>Cold Start vs Warm Start vs Hot Start:</h3>

          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ù†ÙˆØ¹</th>
                <th>Ù…ØªÙ‰ØŸ</th>
                <th>Ø§Ù„ÙˆÙ‚Øª</th>
                <th>Ù…Ø§ ÙŠØ­Ø¯Ø«ØŸ</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Cold Start</strong></td>
                <td>Process Ù…ÙŠØª</td>
                <td>500-2000ms</td>
                <td>Process Ø¬Ø¯ÙŠØ¯ + Application.onCreate() + Activities</td>
              </tr>
              <tr>
                <td><strong>Warm Start</strong></td>
                <td>Process Ø­ÙŠØŒ Activity Ù…ÙŠØª</td>
                <td>200-500ms</td>
                <td>Activity.onCreate() ÙÙ‚Ø·</td>
              </tr>
              <tr>
                <td><strong>Hot Start</strong></td>
                <td>Process Ø­ÙŠØŒ Activity Ø­ÙŠØ©</td>
                <td>50-200ms</td>
                <td>Activity.onRestart() â†’ onStart() â†’ onResume()</td>
              </tr>
            </tbody>
          </table>

          <h3>savedInstanceState: Ø§Ù„Ù…Ù†Ù‚Ø°!</h3>

          <div dir="ltr">
            <pre>savedInstanceState Lifecycle:

BEFORE Process Death:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User navigates away (Home button)      â”‚
â”‚                                        â”‚
â”‚ Activity.onPause()                     â”‚
â”‚ Activity.onStop()                      â”‚
â”‚ Activity.onSaveInstanceState(outState) â”‚ âš¡ CRITICAL!
â”‚ â””â”€â†’ outState.putString("key", "value")â”‚
â”‚     outState.putInt("scroll", 100)     â”‚
â”‚                                        â”‚
â”‚ System saves Bundle to disk/memory     â”‚
â”‚ (not in Process memory!)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AFTER Process Death:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ System recreates Process               â”‚
â”‚                                        â”‚
â”‚ Activity.onCreate(savedInstanceState)  â”‚
â”‚ â””â”€â†’ savedInstanceState != null âœ“      â”‚
â”‚     val value = savedInstanceState     â”‚
â”‚         .getString("key")              â”‚
â”‚     val scroll = savedInstanceState    â”‚
â”‚         .getInt("scroll")              â”‚
â”‚                                        â”‚
â”‚ State restored! âœ“                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

What to save:
âœ“ User input (EditText content)
âœ“ Scroll positions
âœ“ Selected items
âœ“ Expanded/collapsed states
âœ“ Transient UI state

What NOT to save:
âŒ Large objects (> 500 KB)
âŒ Bitmaps (use ViewModel)
âŒ Complex objects (serialize or use ViewModel)
âŒ Sensitive data (encrypt if needed)

Size limit: ~1 MB
â€¢ TransactionTooLargeException if exceeded!
â€¢ Keep Bundles small and simple</pre>
          </div>

          <div class="warning">
            <strong>âš ï¸ Common Mistake:</strong><br />
            <br />
            <strong>Assuming onDestroy() will be called:</strong><br />
            <br />
            // âŒ WRONG!<br />
            override fun onDestroy() {<br />
            &nbsp;&nbsp;&nbsp;&nbsp;super.onDestroy()<br />
            &nbsp;&nbsp;&nbsp;&nbsp;saveData()  // Never called on Process Death!<br />
            }<br />
            <br />
            // âœ… CORRECT!<br />
            override fun onStop() {<br />
            &nbsp;&nbsp;&nbsp;&nbsp;super.onStop()<br />
            &nbsp;&nbsp;&nbsp;&nbsp;saveData()  // Always called! âœ“<br />
            }<br />
            <br />
            override fun onSaveInstanceState(outState: Bundle) {<br />
            &nbsp;&nbsp;&nbsp;&nbsp;super.onSaveInstanceState(outState)<br />
            &nbsp;&nbsp;&nbsp;&nbsp;outState.putString("data", data)  // Saved by System âœ“<br />
            }
          </div>

          <hr />

          <h2>ÙƒÙŠÙ ØªØ®ØªØ¨Ø± Process DeathØŸ ğŸ§ª</h2>

          <h3>Ø§Ù„Ø·Ø±Ù‚ Ø§Ù„Ø£Ø±Ø¨Ø¹:</h3>

          <h4>1. Developer Options: "Don't keep activities"</h4>

          <div dir="ltr">
            <pre>// Best for regular testing

Steps:
1. Settings â†’ Developer Options
2. Enable "Don't keep activities"
3. Run your app
4. Navigate between activities
5. Every background Activity is killed!

Pros:
âœ“ Simulates aggressive conditions
âœ“ Automatic (no manual steps)
âœ“ Tests every navigation
âœ“ Catches issues quickly

Cons:
âŒ Too aggressive (not realistic)
âŒ Kills on every navigation
âŒ Hard to test multi-activity flows

Use when:
â€¢ During development
â€¢ Testing state save/restore
â€¢ Quick bug checking</pre>
          </div>

          <h4>2. ADB Command: Kill Process</h4>

          <div dir="ltr">
            <pre>// More realistic testing

Steps:
1. Run your app
2. Navigate to Activity you want to test
3. Press Home button (app to background)
4. Run ADB command:
   $ adb shell am kill com.example.app
5. Return to app (Recent Apps or icon)
6. App should restore state âœ“

Pros:
âœ“ Realistic (simulates LMK)
âœ“ Manual control
âœ“ Can test specific scenarios

Cons:
âŒ Manual process
âŒ Need ADB access

Use when:
â€¢ Testing specific flows
â€¢ QA testing
â€¢ Reproduction of bugs</pre>
          </div>

          <h4>3. Android Studio: Stop Process</h4>

          <div dir="ltr">
            <pre>// IDE-based testing

Steps:
1. Run app in Debug mode
2. Navigate to desired state
3. Press Home (app to background)
4. In Android Studio:
   Run â†’ Stop (or click Stop button)
5. Return to app
6. Observe restoration

Pros:
âœ“ Easy (one click)
âœ“ No ADB needed
âœ“ Works in IDE

Cons:
âŒ Only in Debug mode
âŒ Slightly different from real kill

Use when:
â€¢ Quick testing during development
â€¢ No device ADB access</pre>
          </div>

          <h4>4. Simulate in Code: ViewModel + savedInstanceState</h4>

          <div dir="ltr">
            <pre>// Automated testing

Test Case:
@Test
fun testActivityRecreation() {
    val scenario = ActivityScenario.launch(MainActivity::class.java)
    
    // Enter some state
    scenario.onActivity { activity ->
        activity.editText.setText("Test data")
    }
    
    // Simulate recreation (rotation/process death)
    scenario.recreate()
    
    // Verify state restored
    scenario.onActivity { activity ->
        assertEquals("Test data", activity.editText.text.toString())
    }
}

Pros:
âœ“ Automated
âœ“ Repeatable
âœ“ CI/CD friendly

Cons:
âŒ Doesn't test actual Process Death
âŒ More setup required

Use when:
â€¢ Unit/Integration tests
â€¢ Automated QA
â€¢ Regression testing</pre>
          </div>

          <h3>Comprehensive Testing Checklist:</h3>

          <div class="success">
            <strong>âœ… Process Death Testing Checklist:</strong><br />
            <br />
            <strong>Before Release:</strong><br />
            <br />
            â˜ Enable "Don't keep activities"<br />
            â˜ Navigate through ALL screens<br />
            â˜ Fill forms, scroll lists, select items<br />
            â˜ Go to background, return<br />
            â˜ Verify all state restored<br />
            <br />
            â˜ Test with ADB kill:<br />
            &nbsp;&nbsp;- Fill long form<br />
            &nbsp;&nbsp;- Go to background<br />
            &nbsp;&nbsp;- Kill process<br />
            &nbsp;&nbsp;- Return, verify form intact<br />
            <br />
            â˜ Test rotation + process death<br />
            â˜ Test with low memory (background apps)<br />
            â˜ Test deep linking after process death<br />
            â˜ Test notifications after process death<br />
            <br />
            <strong>â†’ If anything fails: FIX IMMEDIATELY!</strong>
          </div>

          <hr />

          <h2>Ù…Ø§ Ù‡Ùˆ TaskØŸ ğŸ“‹</h2>

          <h3>Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ:</h3>

          <blockquote>
            <strong>Task:</strong><br />
            Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ù† Activities Ù…Ø±ØªØ¨Ø© ÙÙŠ StackØŒ ØªÙ…Ø«Ù„ "ÙˆØ­Ø¯Ø© Ø¹Ù…Ù„" Ù…Ù† Ù…Ù†Ø¸ÙˆØ± User<br />
            <br />
            <strong>Key Points:</strong><br />
            â€¢ Task = Back Stack (Ù†ÙØ³ Ø§Ù„Ø´ÙŠØ¡ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹)<br />
            â€¢ Task ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ­ØªÙˆÙŠ Activities Ù…Ù† apps Ù…Ø®ØªÙ„ÙØ©!<br />
            â€¢ Task Ù„Ù‡ Ù‡ÙˆÙŠØ© Ù…Ù†ÙØµÙ„Ø© Ø¹Ù† Process<br />
            â€¢ Task ÙŠØ¨Ù‚Ù‰ Ø­ØªÙ‰ Ù„Ùˆ Process Ù…Ø§Øª<br />
            â€¢ User ÙŠØ±Ù‰ Tasks ÙÙŠ Recent Apps<br />
            <br />
            <strong>â†’ Task = ÙˆØ­Ø¯Ø© Ø§Ù„ØªÙ†Ù‚Ù„ Ù…Ù† Ù…Ù†Ø¸ÙˆØ± User</strong>
          </blockquote>

          <h3>Task vs Process:</h3>

          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ø¬Ø§Ù†Ø¨</th>
                <th>Task</th>
                <th>Process</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Ø§Ù„ØªØ¹Ø±ÙŠÙ</strong></td>
                <td>Ù…Ø¬Ù…ÙˆØ¹Ø© Activities (Stack)</td>
                <td>Ù…Ø³Ø§Ø­Ø© ÙÙŠ Memory</td>
              </tr>
              <tr>
                <td><strong>User-facing</strong></td>
                <td>Ù†Ø¹Ù… âœ“ (Recent Apps)</td>
                <td>Ù„Ø§ âŒ (Ø®Ù„Ù Ø§Ù„ÙƒÙˆØ§Ù„ÙŠØ³)</td>
              </tr>
              <tr>
                <td><strong>Ø§Ù„Ø¨Ù‚Ø§Ø¡</strong></td>
                <td>ÙŠØ¨Ù‚Ù‰ Ø¨Ø¹Ø¯ Process Death</td>
                <td>ÙŠÙ…ÙˆØª ÙÙˆØ±Ø§Ù‹</td>
              </tr>
              <tr>
                <td><strong>Multi-App</strong></td>
                <td>ÙŠÙ…ÙƒÙ† (Activities Ù…Ù† apps Ù…Ø®ØªÙ„ÙØ©)</td>
                <td>Ù„Ø§ (app ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·)</td>
              </tr>
              <tr>
                <td><strong>ÙŠÙØ¯Ø§Ø± Ø¨ÙˆØ§Ø³Ø·Ø©</strong></td>
                <td>ActivityManager</td>
                <td>Kernel + Zygote</td>
              </tr>
              <tr>
                <td><strong>User Control</strong></td>
                <td>Ù†Ø¹Ù… (Swipe away Ù…Ù† Recent)</td>
                <td>Ù„Ø§ (Ù…Ø¨Ø§Ø´Ø±)</td>
              </tr>
            </tbody>
          </table>

          <h3>Task Structure:</h3>

          <div dir="ltr">
            <pre>Task Anatomy:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Task ID: 12345                              â”‚
â”‚ Base Activity: MainActivity                 â”‚
â”‚ Root: com.example.app                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚ Back Stack (bottom to top):                 â”‚
â”‚                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ Activity A (MainActivity)               â”‚â”‚ â† Bottom (Root)
â”‚ â”‚ â€¢ State: STOPPED                        â”‚â”‚
â”‚ â”‚ â€¢ App: com.example.app                  â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                  â†‘                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ Activity B (DetailActivity)             â”‚â”‚
â”‚ â”‚ â€¢ State: STOPPED                        â”‚â”‚
â”‚ â”‚ â€¢ App: com.example.app                  â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                  â†‘                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ Activity C (ShareActivity)              â”‚â”‚ â† Top (Foreground)
â”‚ â”‚ â€¢ State: RESUMED                        â”‚â”‚
â”‚ â”‚ â€¢ App: com.android.messaging            â”‚â”‚ â† Different app!
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User sees: Activity C (messaging app)
User presses Back: â†’ Activity B (your app)
User presses Back: â†’ Activity A (your app)
User presses Back: â†’ Task destroyed, Home screen

Key: All 3 activities in SAME Task, different apps!</pre>
          </div>

          <h3>Task ÙÙŠ Recent Apps:</h3>

          <div dir="ltr">
            <pre>Recent Apps Screen (Overview):

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Task 1: Chrome                    â”‚
â”‚  â””â”€ 10 tabs open                   â”‚
â”‚     (Single Task, many Activities) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Task 2: Gmail                     â”‚
â”‚  â””â”€ Composing email                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Task 3: Your App                  â”‚
â”‚  â””â”€ DetailActivity visible         â”‚
â”‚     (but MainActivity below in stack)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Task 4: Settings                  â”‚
â”‚  â””â”€ Wi-Fi settings                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Swipe away Task 3:
â€¢ Task removed from System
â€¢ If Process alive: finish() called on Activities
â€¢ If Process dead: Task just disappears
â€¢ Next launch: Fresh Task (new stack)</pre>
          </div>

          <hr />

          <h2>Back Stack: ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ØŸ ğŸ”™</h2>

          <h3>Back Stack = LIFO Stack:</h3>

          <blockquote>
            <strong>Back Stack:</strong> Last In, First Out<br />
            <br />
            â€¢ Ø¢Ø®Ø± Activity ØªÙÙØªØ­ = Ø£ÙˆÙ„ Activity ØªÙØºÙ„Ù‚ Ø¨Ù€ Back<br />
            â€¢ Ù…Ø«Ù„ Stack of plates (Ø£Ø·Ø¨Ø§Ù‚ Ù…Ø±ØµÙˆØµØ©)<br />
            â€¢ Back button = Pop Ù…Ù† Stack<br />
            â€¢ New Activity = Push Ø¥Ù„Ù‰ Stack
          </blockquote>

          <h3>Navigation Flow:</h3>

          <div dir="ltr">
            <pre>Navigation Example:

Initial State:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    A     â”‚ â† Top (visible)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Stack: [A]

User clicks button â†’ Start Activity B:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    B     â”‚ â† Top (visible)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    A     â”‚ â† Below (stopped)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Stack: [A, B]

User clicks button â†’ Start Activity C:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    C     â”‚ â† Top (visible)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    B     â”‚ â† Below
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    A     â”‚ â† Bottom
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Stack: [A, B, C]

User presses Back:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    B     â”‚ â† Top (visible again)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    A     â”‚ â† Below
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Stack: [A, B]  (C destroyed)

User presses Back:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    A     â”‚ â† Top (visible)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Stack: [A]  (B destroyed)

User presses Back:
(empty)
Stack: []  (A destroyed, Task finished, Home screen)</pre>
          </div>

          <h3>Lifecycle ÙÙŠ Back Stack:</h3>

          <div dir="ltr">
            <pre>Activity States in Stack:

When B starts from A:

A's Lifecycle:
â”œâ”€â†’ onPause()      (loses focus)
â”œâ”€â†’ onStop()       (not visible)
â””â”€â†’ STOPPED        (but alive in stack!)

B's Lifecycle:
â”œâ”€â†’ onCreate()
â”œâ”€â†’ onStart()
â””â”€â†’ onResume()     (visible)

Stack: [A(stopped), B(resumed)]


When Back pressed (B â†’ A):

B's Lifecycle:
â”œâ”€â†’ onPause()      (loses focus)
â”œâ”€â†’ onStop()       (not visible)
â”œâ”€â†’ onDestroy()    (destroyed)
â””â”€â†’ DESTROYED      (removed from memory)

A's Lifecycle:
â”œâ”€â†’ onRestart()    (coming back!)
â”œâ”€â†’ onStart()
â””â”€â†’ onResume()     (visible again)

Stack: [A(resumed)]  (B gone)

Key: A was NOT destroyed, just stopped!
     No onCreate() again, just onRestart()</pre>
          </div>

          <h3>Multiple Tasks Example:</h3>

          <div dir="ltr">
            <pre>Scenario: User navigating multiple apps

Task 1 (Your App):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    C     â”‚ â† Top
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    B     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    A     â”‚ â† Root
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User presses Home â†’ Opens Email App:

Task 2 (Email):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Compose  â”‚ â† Top
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Inbox    â”‚ â† Root
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Both Tasks exist simultaneously!
â€¢ Task 1: Backgrounded (all Activities stopped)
â€¢ Task 2: Foreground (Compose resumed)

User presses Back in Email:
â€¢ Compose destroyed
â€¢ Inbox resumed
â€¢ Task 2 still alive

User presses Back again:
â€¢ Inbox destroyed
â€¢ Task 2 finished
â€¢ System switches to Task 1
â€¢ Activity C resumed!

User now sees YOUR app (Activity C)!
Task switching is automatic and seamless.</pre>
          </div>

          <hr />

          <h2>Launch Modes Ø¨Ø§Ù„ØªÙØµÙŠÙ„ ğŸš€</h2>

          <h3>Ø§Ù„Ù€ Launch Modes Ø§Ù„Ø£Ø±Ø¨Ø¹:</h3>

          <h4>1. standard (Default):</h4>

          <div dir="ltr">
            <pre>standard: Create new instance every time

Behavior:
â€¢ Always creates NEW instance
â€¢ Added to top of stack
â€¢ Can have multiple instances
â€¢ Default mode

Example:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    A     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
startActivity(A)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    A     â”‚ â† New instance!
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    A     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
startActivity(A)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    A     â”‚ â† Another new instance!
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    A     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    A     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use cases:
âœ“ Detail screens (can open many)
âœ“ Form screens
âœ“ Most regular activities

Code:
<activity android:name=".DetailActivity"
          android:launchMode="standard" /></pre>
          </div>

          <h4>2. singleTop:</h4>

          <div dir="ltr">
            <pre>singleTop: Reuse if already on top

Behavior:
â€¢ If instance on TOP of stack: reuse it
â€¢ If instance elsewhere in stack: create new
â€¢ onNewIntent() called on reused instance

Example:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    B     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    A     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
startActivity(B)  // B already on top!
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    B     â”‚ â† SAME instance! (no new)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      onNewIntent() called
â”‚    A     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

But:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    A     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    B     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
startActivity(B)  // B not on top
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    B     â”‚ â† New instance created
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    A     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    B     â”‚ â† Old instance still there
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use cases:
âœ“ Notification activities
âœ“ Search results (don't stack duplicates)
âœ“ Activities launched frequently

Code:
<activity android:name=".SearchActivity"
          android:launchMode="singleTop" />

Handle in Activity:
override fun onNewIntent(intent: Intent) {
    super.onNewIntent(intent)
    setIntent(intent)  // Update current intent
    // Handle new data
    val query = intent.getStringExtra("query")
    performSearch(query)
}</pre>
          </div>

          <h4>3. singleTask:</h4>

          <div dir="ltr">
            <pre>singleTask: Only ONE instance per Task

Behavior:
â€¢ Only ONE instance in Task
â€¢ If exists: clear everything above it
â€¢ If not exists: create new
â€¢ Acts as Task root (usually)

Example:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    D     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    C     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    B     â”‚  â† singleTask
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    A     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
startActivity(B)  // B exists in stack!
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    B     â”‚ â† Same instance, C & D destroyed!
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      onNewIntent() called
â”‚    A     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use cases:
âœ“ Main/Home activity
âœ“ Email inbox
âœ“ App root screen

âš ï¸ Warning:
â€¢ Destroys activities above it!
â€¢ Can confuse users if not careful
â€¢ Use sparingly

Code:
<activity android:name=".MainActivity"
          android:launchMode="singleTask" /></pre>
          </div>

          <h4>4. singleInstance:</h4>

          <div dir="ltr">
            <pre>singleInstance: Own Task, one instance system-wide

Behavior:
â€¢ Lives in its OWN Task (alone!)
â€¢ Only ONE instance in entire system
â€¢ No other activities in its Task
â€¢ Activities started from it: go to other Task

Example:
Task 1 (Your App):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    B     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    A     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
startActivity(C)  // C is singleInstance

Task 2 (New Task, just for C):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    C     â”‚ â† Alone in its own Task!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

From C, startActivity(D):
Task 2:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    C     â”‚ â† Still alone
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Task 1 (or new Task 3):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    D     â”‚ â† Goes to different Task!
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    B     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    A     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Use cases:
âœ“ Launcher activity (Android launcher)
âœ“ Browser (Chrome)
âœ“ Phone dialer
âœ“ Very rare in normal apps!

âš ï¸ Rarely needed:
â€¢ Complex Task behavior
â€¢ Can confuse users (separate Recent entry)
â€¢ Use only if you really need it

Code:
<activity android:name=".BrowserActivity"
          android:launchMode="singleInstance" /></pre>
          </div>

          <h3>Launch Mode Comparison:</h3>

          <table>
            <thead>
              <tr>
                <th>Mode</th>
                <th>Instances</th>
                <th>ÙÙŠ Ù†ÙØ³ TaskØŸ</th>
                <th>Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>standard</strong></td>
                <td>Multiple</td>
                <td>Ù†Ø¹Ù…</td>
                <td>Ù…Ø¹Ø¸Ù… Activities</td>
              </tr>
              <tr>
                <td><strong>singleTop</strong></td>
                <td>Multiple (no duplicate on top)</td>
                <td>Ù†Ø¹Ù…</td>
                <td>Notifications, Search</td>
              </tr>
              <tr>
                <td><strong>singleTask</strong></td>
                <td>ÙˆØ§Ø­Ø¯ per Task</td>
                <td>Ù†Ø¹Ù…</td>
                <td>Main/Root Activity</td>
              </tr>
              <tr>
                <td><strong>singleInstance</strong></td>
                <td>ÙˆØ§Ø­Ø¯ system-wide</td>
                <td>Ù„Ø§ (Task Ø®Ø§Øµ)</td>
                <td>Launcher, Browser (Ù†Ø§Ø¯Ø±!)</td>
              </tr>
            </tbody>
          </table>

          <hr />

          <h2>Intent Flags ğŸš©</h2>

          <h3>Common Intent Flags:</h3>

          <h4>FLAG_ACTIVITY_NEW_TASK:</h4>

          <div dir="ltr">
            <pre>FLAG_ACTIVITY_NEW_TASK

Behavior:
â€¢ Start Activity in new Task
â€¢ Or bring existing Task to front

Use case:
â€¢ Starting Activity from non-Activity context
  (Service, BroadcastReceiver, Application)

Example:
val intent = Intent(context, MainActivity::class.java)
intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK
context.startActivity(intent)

// Without this flag from Service: Crash!
// "Calling startActivity() from outside of an Activity context 
//  requires FLAG_ACTIVITY_NEW_TASK flag"</pre>
          </div>

          <h4>FLAG_ACTIVITY_CLEAR_TOP:</h4>

          <div dir="ltr">
            <pre>FLAG_ACTIVITY_CLEAR_TOP

Behavior:
â€¢ If Activity exists in stack: destroy everything above it
â€¢ Then: recreate that Activity (or call onNewIntent)

Example:
Stack: [A, B, C, D, E]
startActivity(B with CLEAR_TOP)
Stack: [A, B]  (C, D, E destroyed)

Common use:
â€¢ "Back to home" button
â€¢ Logout (clear stack, go to login)

Code:
val intent = Intent(this, MainActivity::class.java)
intent.flags = Intent.FLAG_ACTIVITY_CLEAR_TOP
startActivity(intent)

// Often combined with:
intent.flags = Intent.FLAG_ACTIVITY_CLEAR_TOP or 
               Intent.FLAG_ACTIVITY_NEW_TASK</pre>
          </div>

          <h4>FLAG_ACTIVITY_CLEAR_TASK:</h4>

          <div dir="ltr">
            <pre>FLAG_ACTIVITY_CLEAR_TASK

Behavior:
â€¢ Clear entire Task
â€¢ Must be used with NEW_TASK
â€¢ Fresh start (no previous activities)

Example:
Stack: [A, B, C, D]
startActivity(X with CLEAR_TASK | NEW_TASK)
Stack: [X]  (A, B, C, D all destroyed)

Common use:
â€¢ Logout â†’ Login screen (fresh start)
â€¢ First launch after onboarding
â€¢ Reset app state

Code:
val intent = Intent(this, LoginActivity::class.java)
intent.flags = Intent.FLAG_ACTIVITY_CLEAR_TASK or 
               Intent.FLAG_ACTIVITY_NEW_TASK
startActivity(intent)
finish()  // Destroy current Activity too</pre>
          </div>

          <h4>FLAG_ACTIVITY_SINGLE_TOP:</h4>

          <div dir="ltr">
            <pre>FLAG_ACTIVITY_SINGLE_TOP

Behavior:
â€¢ Same as singleTop launch mode
â€¢ But applied per-Intent (not in manifest)

Example:
Stack: [A, B]
startActivity(B with SINGLE_TOP)
Stack: [A, B]  (same B, onNewIntent called)

Use case:
â€¢ Dynamic behavior (sometimes single top, sometimes not)
â€¢ Notification activities

Code:
val intent = Intent(this, DetailActivity::class.java)
intent.flags = Intent.FLAG_ACTIVITY_SINGLE_TOP
startActivity(intent)</pre>
          </div>

          <h4>FLAG_ACTIVITY_REORDER_TO_FRONT:</h4>

          <div dir="ltr">
            <pre>FLAG_ACTIVITY_REORDER_TO_FRONT

Behavior:
â€¢ If Activity exists: move it to top (don't recreate)
â€¢ Other activities stay in place

Example:
Stack: [A, B, C, D]
startActivity(B with REORDER_TO_FRONT)
Stack: [A, C, D, B]  (B moved to top, not recreated)

Use case:
â€¢ Bring existing Activity forward
â€¢ Don't want to recreate
â€¢ Maintain state

Code:
val intent = Intent(this, ExistingActivity::class.java)
intent.flags = Intent.FLAG_ACTIVITY_REORDER_TO_FRONT
startActivity(intent)</pre>
          </div>

          <h3>Flag Combinations:</h3>

          <div dir="ltr">
            <pre>Common Flag Combinations:

1. Logout:
   CLEAR_TASK | NEW_TASK
   â””â”€â†’ Clear everything, fresh Login screen

2. Deep Link from notification:
   NEW_TASK | CLEAR_TOP | SINGLE_TOP
   â””â”€â†’ Bring app to front, clear to target, reuse if on top

3. From Service/Receiver:
   NEW_TASK
   â””â”€â†’ Required for non-Activity context

4. Tab-like behavior:
   REORDER_TO_FRONT
   â””â”€â†’ Switch between existing Activities

5. Home button:
   CLEAR_TOP | SINGLE_TOP
   â””â”€â†’ Go to main, reuse if already there</pre>
          </div>

          <hr />

          <h2>Task Affinity ğŸ”—</h2>

          <h3>Ù…Ø§ Ù‡Ùˆ Task AffinityØŸ</h3>

          <blockquote>
            <strong>Task Affinity:</strong> ØªÙØ¶ÙŠÙ„ Activity Ù„Ù„Ù€ Task Ø§Ù„Ø°ÙŠ ÙŠÙ†ØªÙ…ÙŠ Ø¥Ù„ÙŠÙ‡<br />
            <br />
            â€¢ Default: package name<br />
            â€¢ ÙŠØ­Ø¯Ø¯ Ø£ÙŠ Task ÙŠØ¯Ø®Ù„Ù‡ Activity<br />
            â€¢ Ù…Ù‡Ù… Ù…Ø¹ singleTask Ùˆ NEW_TASK
          </blockquote>

          <h3>Task Affinity Example:</h3>

          <div dir="ltr">
            <pre>// App package: com.example.app

// MainActivity.kt
<activity android:name=".MainActivity"
          android:taskAffinity=""  /> â† Default (package name)

// DetailActivity.kt
<activity android:name=".DetailActivity"
          android:taskAffinity="com.example.app.details" />
          
// ChatActivity.kt
<activity android:name=".ChatActivity"
          android:taskAffinity="com.example.app.chat" />


Scenario:
From MainActivity, start ChatActivity with NEW_TASK:

Result:
Task 1 (affinity: com.example.app):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Main   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Task 2 (affinity: com.example.app.chat):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Chat   â”‚ â† Separate Task!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Recent Apps shows TWO entries for same app!

Use cases:
âœ“ Multi-window split-screen
âœ“ Separate workflows (email compose vs inbox)
âœ“ Independent navigation stacks

âš ï¸ Rare:
â€¢ Most apps don't need this
â€¢ Can confuse users (multiple entries)
â€¢ Use default unless specific need</pre>
          </div>

          <hr />

          <h2>Activity vs Task vs Process ğŸ”</h2>

          <h3>Ø§Ù„ÙØ±Ù‚ Ø§Ù„ÙƒØ§Ù…Ù„:</h3>

          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ø¬Ø§Ù†Ø¨</th>
                <th>Activity</th>
                <th>Task</th>
                <th>Process</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Ø§Ù„ØªØ¹Ø±ÙŠÙ</strong></td>
                <td>Ø´Ø§Ø´Ø© ÙˆØ§Ø­Ø¯Ø©</td>
                <td>Stack Ù…Ù† Activities</td>
                <td>Ù…Ø³Ø§Ø­Ø© Memory</td>
              </tr>
              <tr>
                <td><strong>Lifetime</strong></td>
                <td>Ù‚ØµÙŠØ± (seconds-minutes)</td>
                <td>Ù…ØªÙˆØ³Ø· (minutes-hours)</td>
                <td>Ù…ØªÙˆØ³Ø·-Ø·ÙˆÙŠÙ„</td>
              </tr>
              <tr>
                <td><strong>User-facing</strong></td>
                <td>Ù†Ø¹Ù… (Ù…Ø§ ÙŠØ±Ø§Ù‡ User)</td>
                <td>Ù†Ø¹Ù… (Recent Apps)</td>
                <td>Ù„Ø§ (Ø®Ù„Ù Ø§Ù„ÙƒÙˆØ§Ù„ÙŠØ³)</td>
              </tr>
              <tr>
                <td><strong>Multi-App</strong></td>
                <td>Ù…Ù† app ÙˆØ§Ø­Ø¯</td>
                <td>ÙŠÙ…ÙƒÙ† (activities Ù…Ù† apps Ù…Ø®ØªÙ„ÙØ©)</td>
                <td>Ù…Ù† app ÙˆØ§Ø­Ø¯</td>
              </tr>
              <tr>
                <td><strong>ÙŠÙ…ÙˆØª Ø¹Ù†Ø¯</strong></td>
                <td>finish(), Back</td>
                <td>Clear Ù…Ù† Recent Apps</td>
                <td>Low Memory, Force Stop</td>
              </tr>
              <tr>
                <td><strong>State Saving</strong></td>
                <td>onSaveInstanceState</td>
                <td>System ÙŠØ­ÙØ¸ Stack</td>
                <td>Ù„Ø§ (ÙƒÙ„ Ø´ÙŠØ¡ ÙŠØ®ØªÙÙŠ)</td>
              </tr>
            </tbody>
          </table>

          <h3>Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø¨ÙŠÙ†Ù‡Ù…:</h3>

          <div dir="ltr">
            <pre>Relationship:

Process (PID: 12345):
â”œâ”€ Task 1 (TaskID: 100):
â”‚  â”œâ”€ Activity A (running in this Process)
â”‚  â”œâ”€ Activity B (running in this Process)
â”‚  â””â”€ Activity C (running in this Process)
â”‚
â””â”€ Task 2 (TaskID: 101):
   â””â”€ Activity D (running in this Process)

Another Process (PID: 67890):
â””â”€ Task 1 (TaskID: 100):  â† Same Task!
   â””â”€ Activity E (different app, same Task!)

Key Insights:
â€¢ ONE Process can have Activities in multiple Tasks
â€¢ ONE Task can have Activities from multiple Processes
â€¢ Activities, Tasks, Processes are independent!

Example: Share Intent
Your App (Process 12345):
â”œâ”€ MainActivity
â””â”€ DetailActivity â†’ User clicks Share

System creates:
Task (Your Task):
â”œâ”€ MainActivity
â”œâ”€ DetailActivity
â””â”€ ShareActivity â† From Android System (different Process!)

All in same Task, different Processes!</pre>
          </div>

          <hr />

          <h2>Ø£Ù…Ø«Ù„Ø© Ù…Ø¹Ù‚Ø¯Ø© Ù…Ù† Ø§Ù„ÙˆØ§Ù‚Ø¹ ğŸ’¡</h2>

          <h3>Ù…Ø«Ø§Ù„ 1: Email App Navigation</h3>

          <div dir="ltr">
            <pre>Gmail-like Navigation:

Inbox (singleTask):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Inbox           â”‚ â† Root, singleTask
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User opens email 1:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Email Detail 1    â”‚ â† standard
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Inbox           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User clicks notification (email 2):
Intent with CLEAR_TOP | SINGLE_TOP:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Email Detail 2    â”‚ â† New instance
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Inbox           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
(Email Detail 1 destroyed)

User presses Back:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Inbox           â”‚ â† Back to inbox
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Why this works:
â€¢ Inbox = singleTask (always one instance)
â€¢ Email Details = standard (can have many)
â€¢ Notifications use CLEAR_TOP (clean navigation)
â€¢ Result: Predictable UX âœ“</pre>
          </div>

          <h3>Ù…Ø«Ø§Ù„ 2: Deep Linking</h3>

          <div dir="ltr">
            <pre>Scenario: User clicks link in Chrome

Link: https://yourapp.com/product/12345

Current State:
Task 1 (Chrome):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web Page           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Task 2 (Your App - if exists):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   DetailActivity     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   MainActivity       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Deep Link Handler:
<activity android:name=".ProductActivity">
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:scheme="https"
              android:host="yourapp.com"
              android:pathPrefix="/product/" />
    </intent-filter>
</activity>

Behavior Options:

Option 1: FLAG_ACTIVITY_NEW_TASK (default)
Result:
Task 2 (Your App):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ProductActivity 12345â”‚ â† New Task or existing Task
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   DetailActivity     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   MainActivity       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Option 2: CLEAR_TOP | NEW_TASK
Result:
Task 2:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ProductActivity 12345â”‚ â† Top of stack
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
(DetailActivity, MainActivity cleared)

Option 3: CLEAR_TASK | NEW_TASK
Result:
Task 2:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ProductActivity 12345â”‚ â† Only activity
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
(Everything cleared, fresh start)

Best practice: CLEAR_TOP | NEW_TASK
â€¢ Brings app to front
â€¢ Clears back stack to target
â€¢ Predictable navigation âœ“</pre>
          </div>

          <h3>Ù…Ø«Ø§Ù„ 3: Multi-Window Split Screen</h3>

          <div dir="ltr">
            <pre>Split Screen Scenario:

User opens Your App in split screen:

Screen (divided):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚                 â”‚
â”‚   Your App      â”‚   Chrome        â”‚
â”‚   (Task 1)      â”‚   (Task 2)      â”‚
â”‚                 â”‚                 â”‚
â”‚ MainActivity    â”‚  Web Page       â”‚
â”‚                 â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Both Tasks FOREGROUND simultaneously!
â€¢ Your App: onPause â†’ onResume (visible but not focused)
â€¢ Chrome: onPause â†’ onResume (visible but not focused)

When user focuses Your App:
â€¢ Your App: onResume (gets focus)
â€¢ Chrome: onPause (loses focus)

Process Implications:
â€¢ Both Processes: High priority (visible!)
â€¢ Both protected from killing
â€¢ OOM Adj: -600 (visible, not foreground)

Task Affinity Use Case:
If you want independent windows:
<activity android:name=".ChatActivity"
          android:taskAffinity="com.yourapp.chat" />

Result: User can open Chat in one window,
        Main in another window!</pre>
          </div>

          <h3>Ù…Ø«Ø§Ù„ 4: Process Death + Deep Stack Recovery</h3>

          <div dir="ltr">
            <pre>Complex Scenario:

User navigates deep into app:
A â†’ B â†’ C â†’ D â†’ E (E visible)

Stack: [A, B, C, D, E]
All saved state in System

User goes to background:
â€¢ All Activities: onStop()
â€¢ System: Saves state for all 5

Process killed (Low Memory):
â€¢ Process: â˜ ï¸
â€¢ All Activities: Gone
â€¢ But System remembers: [A, B, C, D, E] structure

User returns to app:
System must recreate entire stack!

Naive recreation (Wrong!):
1. Create A â†’ onCreate(savedState A)
2. Immediately create B on top
3. Then C, then D, then E
Result: A created but never visible (waste!)

Smart recreation (Android's way):
1. Create E ONLY (top of stack)
   â””â”€â†’ onCreate(savedState E)
   â””â”€â†’ onStart()
   â””â”€â†’ onResume()
2. User sees E immediately! âœ“
3. A, B, C, D: NOT created yet (lazy!)

When user presses Back (E â†’ D):
1. Destroy E
2. NOW create D
   â””â”€â†’ onCreate(savedState D)
   â””â”€â†’ onStart()
   â””â”€â†’ onResume()

Continue pattern for C, B, A

Benefits:
âœ“ Fast startup (only top Activity)
âœ“ Memory efficient (don't create all)
âœ“ Progressive restoration

This is why:
â€¢ onCreate(savedInstanceState) critical!
â€¢ State must be comprehensive
â€¢ Each Activity stands alone</pre>
          </div>

          <hr />

          <h2>Ø§Ù„Ø®Ù„Ø§ØµØ© ÙˆØ§Ù„Ù†ØµØ§Ø¦Ø­ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© ğŸ“</h2>

          <h3>Ù…Ù„Ø®Øµ Process Death:</h3>

          <div dir="ltr">
            <pre>Process Death Summary:

What Dies:
â˜ ï¸ Process (PID gone)
â˜ ï¸ Application instance
â˜ ï¸ All Activities
â˜ ï¸ All Services
â˜ ï¸ All Threads
â˜ ï¸ Static variables
â˜ ï¸ Singletons
â˜ ï¸ In-memory data

What Survives:
âœ“ Task structure (Activity stack)
âœ“ savedInstanceState Bundles
âœ“ Files on disk
âœ“ SharedPreferences
âœ“ Databases

How to Handle:
1. Save state in onSaveInstanceState()
2. Restore in onCreate(savedInstanceState)
3. Use ViewModel for complex data
4. Save important data in onStop()
5. Test with "Don't keep activities"
6. Test with adb shell am kill</pre>
          </div>

          <h3>Ù…Ù„Ø®Øµ Tasks & Back Stack:</h3>

          <div dir="ltr">
            <pre>Tasks & Back Stack Summary:

Task:
â€¢ Stack of Activities
â€¢ User-facing (Recent Apps)
â€¢ Survives Process Death
â€¢ Can contain Activities from multiple apps

Back Stack:
â€¢ LIFO (Last In, First Out)
â€¢ Back button pops from stack
â€¢ Top Activity = visible
â€¢ Others = stopped (but alive)

Launch Modes:
â€¢ standard: Always new instance
â€¢ singleTop: Reuse if on top
â€¢ singleTask: One per Task, clear above
â€¢ singleInstance: Alone in own Task (rare!)

Intent Flags:
â€¢ NEW_TASK: Start in new/existing Task
â€¢ CLEAR_TOP: Destroy everything above
â€¢ CLEAR_TASK: Clear entire Task (with NEW_TASK)
â€¢ SINGLE_TOP: Reuse if on top
â€¢ REORDER_TO_FRONT: Move existing to top</pre>
          </div>

          <h3>Golden Rules:</h3>

          <div class="success">
            <strong>âœ… Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©:</strong><br />
            <br />
            <strong>Process Death:</strong><br />
            âœ“ ÙŠØ­Ø¯Ø« Ø¨Ø¯ÙˆÙ† ØªØ­Ø°ÙŠØ± (SIGKILL)<br />
            âœ“ onDestroy() Ù„Ø§ ÙŠÙØ³ØªØ¯Ø¹Ù‰!<br />
            âœ“ Ø§Ø­ÙØ¸ State ÙÙŠ onSaveInstanceState()<br />
            âœ“ Ø§Ø­ÙØ¸ Data ÙÙŠ onStop()<br />
            âœ“ Ø§Ø³ØªØ®Ø¯Ù… ViewModel Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¹Ù‚Ø¯Ø©<br />
            âœ“ Ø§Ø®ØªØ¨Ø± Ù…Ø¹ "Don't keep activities" Ø¯Ø§Ø¦Ù…Ø§Ù‹!<br />
            <br />
            <strong>Tasks:</strong><br />
            âœ“ Task â‰  Process (Ù…Ù†ÙØµÙ„Ø§Ù†!)<br />
            âœ“ Task ÙŠØ¹ÙŠØ´ Ø¨Ø¹Ø¯ Process Death<br />
            âœ“ Task ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠØ­ØªÙˆÙŠ apps Ù…ØªØ¹Ø¯Ø¯Ø©<br />
            âœ“ Recent Apps = Tasks (Ù„ÙŠØ³ Processes)<br />
            <br />
            <strong>Back Stack:</strong><br />
            âœ“ LIFO Stack (Ø¢Ø®Ø± Ø¯Ø§Ø®Ù„ØŒ Ø£ÙˆÙ„ Ø®Ø§Ø±Ø¬)<br />
            âœ“ Activities ÙÙŠ Stack: stopped (Ù„ÙŠØ³ destroyed)<br />
            âœ“ Back = Pop Ù…Ù† Stack<br />
            âœ“ System ÙŠØ¹ÙŠØ¯ Ø¨Ù†Ø§Ø¡ Stack Ø¨Ø¹Ø¯ Process Death<br />
            <br />
            <strong>Launch Modes:</strong><br />
            âœ“ standard Ù„Ù„Ù€ Ù…Ø¹Ø¸Ù… Activities<br />
            âœ“ singleTop Ù„Ù„Ù€ Notifications<br />
            âœ“ singleTask Ù„Ù„Ù€ Main Activity (Ù†Ø§Ø¯Ø±Ø§Ù‹)<br />
            âœ“ singleInstance Ù†Ø§Ø¯Ø± Ø¬Ø¯Ø§Ù‹ (Ù„Ø§ ØªØ³ØªØ®Ø¯Ù…Ù‡ Ø¥Ù„Ø§ Ù„Ù„Ø¶Ø±ÙˆØ±Ø©)<br />
            <br />
            <strong>Testing:</strong><br />
            âœ“ "Don't keep activities" Ù‚Ø¨Ù„ ÙƒÙ„ Release<br />
            âœ“ Ø§Ø®ØªØ¨Ø± Deep stacks (Aâ†’Bâ†’Câ†’Dâ†’E)<br />
            âœ“ Ø§Ø®ØªØ¨Ø± Notifications + Deep links<br />
            âœ“ Ø§Ø®ØªØ¨Ø± Rotation + Process death<br />
            âœ“ Ø§Ø®ØªØ¨Ø± Ø¹Ù„Ù‰ Low-end devices
          </div>

          <h3>Common Mistakes:</h3>

          <div class="warning">
            <strong>âŒ Ø£Ø®Ø·Ø§Ø¡ Ø´Ø§Ø¦Ø¹Ø©:</strong><br />
            <br />
            <strong>1. Ø¥Ù‡Ù…Ø§Ù„ Process Death:</strong><br />
            â€¢ Ø¹Ø¯Ù… Ø­ÙØ¸ State<br />
            â€¢ Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Singletons<br />
            â€¢ Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¹Ù„Ù‰ Static variables<br />
            â€¢ Ø¹Ø¯Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±<br />
            <br />
            <strong>2. Ø³ÙˆØ¡ Ø§Ø³ØªØ®Ø¯Ø§Ù… Launch Modes:</strong><br />
            â€¢ singleTask Ù„ÙƒÙ„ Activity<br />
            â€¢ singleInstance Ø¨Ø¯ÙˆÙ† ÙÙ‡Ù…<br />
            â€¢ ØªØ¬Ø§Ù‡Ù„ Ø§Ù„ØªØ£Ø«ÙŠØ± Ø¹Ù„Ù‰ Back Stack<br />
            <br />
            <strong>3. Ø¥Ù‡Ù…Ø§Ù„ savedInstanceState:</strong><br />
            â€¢ Ø­ÙØ¸ ÙƒÙ„ Ø´ÙŠØ¡ ÙÙŠ ViewModel ÙÙ‚Ø·<br />
            â€¢ Ù†Ø³ÙŠØ§Ù† super.onSaveInstanceState()<br />
            â€¢ Ø­ÙØ¸ objects Ù…Ø¹Ù‚Ø¯Ø© (Parcelable Ø®Ø·Ø£)<br />
            <br />
            <strong>4. Ø¹Ø¯Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:</strong><br />
            â€¢ Ø¹Ø¯Ù… ØªÙØ¹ÙŠÙ„ "Don't keep activities"<br />
            â€¢ Ø¹Ø¯Ù… Ø§Ø®ØªØ¨Ø§Ø± Deep navigation<br />
            â€¢ Ø¹Ø¯Ù… Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ù„Ù‰ Ø£Ø¬Ù‡Ø²Ø© Ø¶Ø¹ÙŠÙØ©
          </div>

          <h3>Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø¨ØªØ¯Ø¦ ÙˆØ§Ù„Ù…Ø­ØªØ±Ù:</h3>

          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ù…Ø¨ØªØ¯Ø¦</th>
                <th>Ø§Ù„Ù…Ø­ØªØ±Ù</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Ù„Ø§ ÙŠØ¹Ø±Ù Ø¹Ù† Process Death</td>
                <td>ÙŠØµÙ…Ù… Ù„Ù„Ù€ Process Death Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©</td>
              </tr>
              <tr>
                <td>ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Singletons Ù„Ù„Ù€ State</td>
                <td>ÙŠØ³ØªØ®Ø¯Ù… savedInstanceState + ViewModel</td>
              </tr>
              <tr>
                <td>Ù„Ø§ ÙŠØ®ØªØ¨Ø± "Don't keep activities"</td>
                <td>ÙŠØ®ØªØ¨Ø± Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù‚Ø¨Ù„ Release</td>
              </tr>
              <tr>
                <td>Ù„Ø§ ÙŠÙÙ‡Ù… Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Task Ùˆ Process</td>
                <td>ÙŠÙÙ‡Ù… Ø§Ù„Ù‡Ø±Ù…ÙŠØ©: Activity < Task < Process</td>
              </tr>
              <tr>
                <td>ÙŠØ³ØªØ®Ø¯Ù… singleTask Ù„ÙƒÙ„ Ø´ÙŠØ¡</td>
                <td>ÙŠØ®ØªØ§Ø± Launch Mode Ø§Ù„Ù…Ù†Ø§Ø³Ø¨</td>
              </tr>
              <tr>
                <td>ÙŠØªØ¬Ø§Ù‡Ù„ onSaveInstanceState()</td>
                <td>ÙŠØ­ÙØ¸ ÙƒÙ„ State Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠ</td>
              </tr>
            </tbody>
          </table>

          <hr />

          <h2>Ø®Ø§ØªÙ…Ø© ğŸ</h2>

          <blockquote>
            <strong>Process Death Ù„ÙŠØ³ BugØŒ Ø¨Ù„ Feature</strong><br />
            <br />
            Ù‡Ùˆ <strong>Ø¶Ø±ÙˆØ±Ø©</strong> Ù„Ù†Ø¸Ø§Ù… Android:<br />
            â€¢ ÙŠØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ Memory<br />
            â€¢ ÙŠØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ Battery<br />
            â€¢ ÙŠØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ Performance<br />
            <br />
            <strong>Ø¹Ù†Ø¯Ù…Ø§ ØªÙÙ‡Ù… Process Death Ùˆ Tasks:</strong><br />
            âœ“ ØªØµÙ…Ù… Apps ØªÙ†Ø¬Ùˆ Ù…Ù† Ø§Ù„Ù‚ØªÙ„<br />
            âœ“ ØªØ­ÙØ¸ State Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­<br />
            âœ“ ØªÙÙ‡Ù… Back Stack behavior<br />
            âœ“ ØªØ®ØªØ§Ø± Launch Modes Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©<br />
            âœ“ ØªØ¨Ù†ÙŠ UX Ø³Ù„Ø³ ÙˆÙ…ØªÙˆÙ‚Ø¹<br />
            âœ“ Users Ù„Ø§ ÙŠÙ„Ø§Ø­Ø¸ÙˆÙ† Ø´ÙŠØ¦Ø§Ù‹! âœ“<br />
            <br />
            <strong>Tasks = ÙˆØ­Ø¯Ø© Ø§Ù„ØªÙ†Ù‚Ù„ Ù…Ù† Ù…Ù†Ø¸ÙˆØ± User</strong><br />
            <strong>Process = ÙˆØ­Ø¯Ø© Ø§Ù„ØªÙ†ÙÙŠØ° Ù…Ù† Ù…Ù†Ø¸ÙˆØ± System</strong><br />
            <strong>â†’ ÙÙ‡Ù… Ø§Ù„ÙØ±Ù‚ = Ù…ÙØªØ§Ø­ Android Mastery! ğŸ¯</strong>
          </blockquote>

          <div class="info">
            <strong>ğŸ’¡ Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©:</strong><br />
            1. Ø§ÙØªØ­ Developer Options<br />
            2. ÙØ¹Ù‘Ù„ "Don't keep activities"<br />
            3. Ø´ØºÙ‘Ù„ ØªØ·Ø¨ÙŠÙ‚Ùƒ<br />
            4. Navigate: A â†’ B â†’ C â†’ D<br />
            5. Ø§Ù…Ù„Ø£ FormsØŒ Scroll lists<br />
            6. Ø§Ø¶ØºØ· Back Ù…Ù† D â†’ C<br />
            7. ØªØ£ÙƒØ¯ ÙƒÙ„ State Ù…Ø­ÙÙˆØ¸<br />
            8. Ø¥Ø°Ø§ Ø£ÙŠ Ø´ÙŠØ¡ Ø¶Ø§Ø¹ â†’ FIX NOW!<br />
            <br />
            <strong>Ø«Ù…:</strong><br />
            9. Ø§Ø®ØªØ¨Ø± Ù…Ø¹ ADB kill<br />
            10. Ø§Ø®ØªØ¨Ø± Rotation + Process death<br />
            11. Ø§Ø®ØªØ¨Ø± Deep linking<br />
            12. Ø§Ø®ØªØ¨Ø± Notifications<br />
            <br />
            <strong>â†’ Process Death testing = ØºÙŠØ± Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙØ§ÙˆØ¶! â˜ ï¸</strong>
          </div>

        </div>
      </div>
    </div>
  </div>
</body>
</html>
