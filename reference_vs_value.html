<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <title>Reference vs Value ÙÙŠ Android</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f7f8fa;
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --border: #e5e7eb;
      --accent: #2563eb;
      --code-bg: #666666;
      --code-text: #ffffff;
    }

    * {
      box-sizing: border-box;
      font-family: 'Nunito', 'Segoe UI', Tahoma, Arial, sans-serif;
    }

    body {
      margin: 0;
      font-family: 'Nunito', 'Segoe UI', Tahoma, Arial, sans-serif; 
      background: var(--bg);
      color: var(--text);
      line-height: 1.8;
    }

    .page {
      max-width: 980px;
      margin: auto;
      padding: 32px 16px;
    }

    .content {
      background: var(--card);
      border-radius: 12px;
      padding: 32px;
      border: 1px solid var(--border);
    }

    h1, h2, h3, h4 {
      color: #111827;
      margin-top: 32px;
    }

    h1 {
      font-size: 2.1rem;
      border-bottom: 3px solid var(--accent);
      padding-bottom: 8px;
    }

    h2 {
      font-size: 1.6rem;
      border-right: 4px solid var(--accent);
      padding-right: 12px;
    }

    h3 {
      font-size: 1.3rem;
    }

    h4 {
      font-size: 1.1rem;
      color: #374151;
    }

    p {
      margin: 12px 0;
    }

    hr {
      margin: 40px 0;
      border: none;
      height: 1px;
      background: var(--border);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
      font-size: 0.95rem;
    }

    table th,
    table td {
      border: 1px solid var(--border);
      padding: 10px;
      text-align: right;
    }

    table th {
      background: #f1f5f9;
      font-weight: 600;
    }

    ul, ol {
      padding-right: 20px;
    }

    blockquote {
      background: #f1f5f9;
      border-right: 4px solid var(--accent);
      padding: 12px 16px;
      margin: 16px 0;
      color: #374151;
    }

    pre {
      background: var(--code-bg);
      color: var(--code-text);
      padding: 16px;
      border-radius: 10px;
      overflow-x: auto;
      margin: 16px 0;
      font-size: 0.9rem;
      direction: ltr;
      text-align: left;
    }

    code {
      font-family: 'Courier New', monospace;
    }

    p code {
      background: #eef2ff;
      color: #1e40af;
      padding: 2px 6px;
      border-radius: 6px;
      font-size: 0.85em;
    }

    section {
      margin-bottom: 32px;
    }

    .warning {
      background: #fef2f2;
      border-right: 4px solid #dc2626;
      padding: 12px 16px;
      margin: 16px 0;
      color: #991b1b;
    }

    .success {
      background: #f0fdf4;
      border-right: 4px solid #16a34a;
      padding: 12px 16px;
      margin: 16px 0;
      color: #166534;
    }

    @media (max-width: 600px) {
      .content {
        padding: 20px;
      }

      h1 {
        font-size: 1.7rem;
      }

      h2 {
        font-size: 1.4rem;
      }
    }
  </style>
</head>

<body>
  <div class="page">
    <div class="content">
      <div class="crossnote markdown-preview">
        <div dir="rtl">
          <h1>Ù…Ø§ Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Reference vs Value ÙˆÙ„Ù…Ø§Ø°Ø§ ÙŠØ³Ø¨Ø¨ Ø£Ø®Ø·Ø§Ø¡ Ø®ÙÙŠØ©ØŸ ğŸ”</h1>

          <h2>Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª</h2>
          <p>
            1 - Ø§Ù„Ù…ÙÙ‡ÙˆÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ÙˆØ§Ù„ÙØ±Ù‚ Ø§Ù„Ø¬ÙˆÙ‡Ø±ÙŠ<br />
            2 - ÙƒÙŠÙ ØªÙØ®Ø²Ù‘Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©<br />
            3 - Value Types vs Reference Types ÙÙŠ Kotlin/Java<br />
            4 - Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø®ÙÙŠØ© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©<br />
            5 - Ø£Ù…Ø«Ù„Ø© ÙˆØ§Ù‚Ø¹ÙŠØ© Ù…Ù† Android<br />
            6 - Ø­Ù„ÙˆÙ„ ÙˆÙ…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ©<br />
            7 - Ø§Ù„Ø®Ù„Ø§ØµØ© ÙˆØ§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©
          </p>

          <hr />

          <h2>Ø§Ù„Ù…ÙÙ‡ÙˆÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ÙˆØ§Ù„ÙØ±Ù‚ Ø§Ù„Ø¬ÙˆÙ‡Ø±ÙŠ ğŸ¯</h2>

          <h3>Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø¨Ø³ÙŠØ·:</h3>

          <blockquote>
            <strong>Value Type (Ø§Ù„Ù‚ÙŠÙ…Ø©):</strong> Ø§Ù„Ù…ØªØºÙŠØ± ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù†ÙØ³Ù‡Ø§ Ù…Ø¨Ø§Ø´Ø±Ø©<br />
            <strong>Reference Type (Ø§Ù„Ù…Ø±Ø¬Ø¹):</strong> Ø§Ù„Ù…ØªØºÙŠØ± ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¹Ù†ÙˆØ§Ù† (Pointer) Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ù…ÙƒØ§Ù† Ø¢Ø®Ø±
          </blockquote>

          <h3>Ø§Ù„ØªØ´Ø¨ÙŠÙ‡ Ø§Ù„ÙˆØ§Ù‚Ø¹ÙŠ:</h3>

          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ù†ÙˆØ¹</th>
                <th>Ø§Ù„ØªØ´Ø¨ÙŠÙ‡</th>
                <th>Ø§Ù„Ù…Ø«Ø§Ù„</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Value</strong></td>
                <td>ÙˆØ±Ù‚Ø© Ù†Ù‚Ø¯ÙŠØ© ÙÙŠ Ø¬ÙŠØ¨Ùƒ</td>
                <td>Ø§Ù„Ù…Ø§Ù„ Ù…ÙˆØ¬ÙˆØ¯ Ù…Ø¹Ùƒ Ù…Ø¨Ø§Ø´Ø±Ø©</td>
              </tr>
              <tr>
                <td><strong>Reference</strong></td>
                <td>Ø¹Ù†ÙˆØ§Ù† Ù…Ù†Ø²Ù„Ùƒ Ø¹Ù„Ù‰ Ø¨Ø·Ø§Ù‚Ø©</td>
                <td>Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© ØªÙØ´ÙŠØ± Ù„Ù„Ù…Ù†Ø²Ù„ØŒ Ù„ÙŠØ³Øª Ø§Ù„Ù…Ù†Ø²Ù„ Ù†ÙØ³Ù‡</td>
              </tr>
            </tbody>
          </table>

          <h3>Ø§Ù„ØªÙ…Ø«ÙŠÙ„ ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©:</h3>

          <div dir="ltr">
            <pre>â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              VALUE TYPE                                â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                        â•‘
â•‘   Stack Memory:                                        â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â•‘
â•‘   â”‚   age = 25  â”‚  â† Ø§Ù„Ù‚ÙŠÙ…Ø© Ù†ÙØ³Ù‡Ø§ Ù…Ø®Ø²Ù†Ø© Ù…Ø¨Ø§Ø´Ø±Ø©         â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â•‘
â•‘                                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘            REFERENCE TYPE                              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                        â•‘
â•‘   Stack Memory:              Heap Memory:              â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â•‘
â•‘   â”‚ user = 0x5A â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ name: "Ali"  â”‚         â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ age: 25      â”‚         â•‘
â•‘      (Ø¹Ù†ÙˆØ§Ù†)                â”‚ email: "..." â”‚         â•‘
â•‘                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â•‘
â•‘                                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</pre>
          </div>

          <hr />

          <h2>ÙƒÙŠÙ ØªÙØ®Ø²Ù‘Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø© ğŸ§ </h2>

          <h3>Stack vs Heap:</h3>

          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©</th>
                <th>Stack</th>
                <th>Heap</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Ø§Ù„Ø­Ø¬Ù…</strong></td>
                <td>Ù…Ø­Ø¯ÙˆØ¯ (~1-2 MB)</td>
                <td>ÙƒØ¨ÙŠØ± (ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ RAM)</td>
              </tr>
              <tr>
                <td><strong>Ø§Ù„Ø³Ø±Ø¹Ø©</strong></td>
                <td>Ø³Ø±ÙŠØ¹ Ø¬Ø¯Ø§Ù‹</td>
                <td>Ø£Ø¨Ø·Ø£ Ù†Ø³Ø¨ÙŠØ§Ù‹</td>
              </tr>
              <tr>
                <td><strong>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</strong></td>
                <td>ØªÙ„Ù‚Ø§Ø¦ÙŠ (LIFO)</td>
                <td>Garbage Collector</td>
              </tr>
              <tr>
                <td><strong>Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</strong></td>
                <td>Primitive Types, References</td>
                <td>Objects, Arrays</td>
              </tr>
              <tr>
                <td><strong>Ø§Ù„Ø­ÙŠØ§Ø©</strong></td>
                <td>Ø­ØªÙ‰ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø¯Ø§Ù„Ø©</td>
                <td>Ø­ØªÙ‰ Ù„Ø§ ØªÙˆØ¬Ø¯ References</td>
              </tr>
            </tbody>
          </table>

          <h3>Ù…Ø«Ø§Ù„ ØªÙˆØ¶ÙŠØ­ÙŠ:</h3>

          <div dir="ltr">
            <pre>fun createUser() {
    val age = 25                    // Value Ø¹Ù„Ù‰ Stack
    val user = User("Ali", age)     // Reference Ø¹Ù„Ù‰ Stack
                                    // Object Ø¹Ù„Ù‰ Heap
}

// Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¯Ø§Ù„Ø©:
// 1. age ÙŠÙØ­Ø°Ù Ù…Ù† Stack ÙÙˆØ±Ø§Ù‹
// 2. Reference ÙŠÙØ­Ø°Ù Ù…Ù† Stack ÙÙˆØ±Ø§Ù‹
// 3. Object ÙŠØ¨Ù‚Ù‰ Ø¹Ù„Ù‰ Heap Ø­ØªÙ‰ GC ÙŠØ¬Ù…Ø¹Ù‡</pre>
          </div>

          <div dir="ltr">
            <pre>Memory Layout:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STACK (Thread-Local)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  createUser():                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚ age = 25    â”‚  â† Value Type              â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                           â”‚
â”‚  â”‚ user = 0x5A â”‚  â† Reference (Ø¹Ù†ÙˆØ§Ù†)       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚         â”‚                                   â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              HEAP (Shared)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  0x5A â†’ User Object:                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â”‚ name: "Ali"      â”‚               â”‚
â”‚         â”‚ age: 25          â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
          </div>

          <hr />

          <h2>Value Types vs Reference Types ÙÙŠ Kotlin/Java ğŸ“Š</h2>

          <h3>Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„ÙƒØ§Ù…Ù„:</h3>

          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ù†ÙˆØ¹</th>
                <th>Value Type</th>
                <th>Reference Type</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Primitives</strong></td>
                <td>Int, Long, Float, Double, Boolean, Char, Byte, Short</td>
                <td>-</td>
              </tr>
              <tr>
                <td><strong>Wrapped</strong></td>
                <td>-</td>
                <td>Integer, Long, Float, Double, Boolean, Character</td>
              </tr>
              <tr>
                <td><strong>Objects</strong></td>
                <td>-</td>
                <td>ÙƒÙ„ Ø§Ù„Ù€ ClassesØŒ Data ClassesØŒ Objects</td>
              </tr>
              <tr>
                <td><strong>Collections</strong></td>
                <td>-</td>
                <td>List, Set, Map, Array</td>
              </tr>
              <tr>
                <td><strong>Strings</strong></td>
                <td>-</td>
                <td>String (Ù„ÙƒÙ† Immutable)</td>
              </tr>
            </tbody>
          </table>

          <h3>Ù…Ø«Ø§Ù„ 1: Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</h3>

          <div dir="ltr">
            <pre>// Value Type
var a = 10
var b = a        // Ù†Ø³Ø® Ø§Ù„Ù‚ÙŠÙ…Ø©
b = 20
println(a)       // 10 (Ù„Ù… ØªØªØºÙŠØ±)
println(b)       // 20

// Memory:
// Stack: a = 10, b = 20 (Ù‚ÙŠÙ…ØªØ§Ù† Ù…Ù†ÙØµÙ„ØªØ§Ù†)


// Reference Type
data class User(var name: String, var age: Int)

val user1 = User("Ali", 25)
val user2 = user1     // Ù†Ø³Ø® Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Reference)
user2.age = 30

println(user1.age)    // 30 â† ØªØºÙŠØ±Øª! ğŸ”´
println(user2.age)    // 30

// Memory:
// Stack: user1 = 0x5A, user2 = 0x5A (Ù†ÙØ³ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†!)
// Heap: 0x5A â†’ User(name="Ali", age=30) â† Object ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·</pre>
          </div>

          <div class="warning">
            <strong>âš ï¸ Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ø®ÙÙŠ Ø§Ù„Ø£ÙˆÙ„:</strong><br />
            Ø¹Ù†Ø¯Ù…Ø§ ØªÙ†Ø³Ø® ReferenceØŒ Ø£Ù†Øª Ù„Ø§ ØªÙ†Ø³Ø® Ø§Ù„Ù€ ObjectØŒ Ø¨Ù„ ØªÙ†Ø³Ø® Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙÙ‚Ø·!<br />
            Ø§Ù„Ù†ØªÙŠØ¬Ø©: Ù…ØªØºÙŠØ±Ø§Ù† ÙŠÙØ´ÙŠØ±Ø§Ù† Ù„Ù†ÙØ³ Ø§Ù„Ù€ Object ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©.
          </div>

          <hr />

          <h2>Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„Ø®ÙÙŠØ© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© ğŸ›</h2>

          <h3>Ø§Ù„Ø®Ø·Ø£ #1: ØªØ¹Ø¯ÙŠÙ„ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>

          <div dir="ltr">
            <pre>// âŒ ÙƒÙˆØ¯ Ø¨Ù‡ Ù…Ø´ÙƒÙ„Ø©
class UserViewModel {
    private val _currentUser = MutableLiveData&lt;User&gt;()
    val currentUser: LiveData&lt;User&gt; = _currentUser

    fun updateUser(user: User) {
        _currentUser.value = user
    }
}

// ÙÙŠ Fragment:
val user = viewModel.currentUser.value!!
user.name = "Modified"  // ğŸ”´ Ø¹Ø¯Ù‘Ù„Ù†Ø§ Ø§Ù„Ù€ Object Ø§Ù„Ø£ØµÙ„ÙŠ!

// Ø§Ù„Ø¢Ù† ÙƒÙ„ Ù…Ù† ÙŠØ±Ø§Ù‚Ø¨ currentUser Ø³ÙŠØ±Ù‰ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
// Ø­ØªÙ‰ Ù„Ùˆ Ù„Ù… Ù†Ø³ØªØ¯Ø¹ÙŠ viewModel.updateUser()!</pre>
          </div>

          <div dir="ltr">
            <pre>// âœ… Ø§Ù„Ø­Ù„: Ø§Ø³ØªØ®Ø¯Ù… copy() Ù„Ø¥Ù†Ø´Ø§Ø¡ object Ø¬Ø¯ÙŠØ¯
val user = viewModel.currentUser.value!!.copy()
user.name = "Modified"  // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù„Ù‰ Ù†Ø³Ø®Ø© Ù…Ù†ÙØµÙ„Ø©

// Ø£Ùˆ:
val modifiedUser = viewModel.currentUser.value!!.copy(name = "Modified")
viewModel.updateUser(modifiedUser)</pre>
          </div>

          <h3>Ø§Ù„Ø®Ø·Ø£ #2: Ù…Ø´Ø§ÙƒÙ„ Collections</h3>

          <div dir="ltr">
            <pre>// âŒ Ù…Ø´ÙƒÙ„Ø© Ø®ÙÙŠØ©
data class Product(var name: String, var price: Double)

val cart = mutableListOf&lt;Product&gt;()
val product = Product("Phone", 1000.0)

cart.add(product)
product.price = 1500.0  // ğŸ”´ Ø¹Ø¯Ù‘Ù„Ù†Ø§ Ø§Ù„Ø³Ø¹Ø±

println(cart[0].price)  // 1500.0 â† ØªØºÙŠØ± ÙÙŠ Ø§Ù„Ù€ cart!

// Ø§Ù„Ø³Ø¨Ø¨: cart ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Reference Ù„Ù„Ù€ product
// Ù„ÙŠØ³ Ù†Ø³Ø®Ø© Ù…Ù†Ù‡!</pre>
          </div>

          <div dir="ltr">
            <pre>// âœ… Ø§Ù„Ø­Ù„ 1: Ø§Ø³ØªØ®Ø¯Ù… copy()
cart.add(product.copy())

// âœ… Ø§Ù„Ø­Ù„ 2: Ø§Ø³ØªØ®Ø¯Ù… Immutable Data Classes
data class Product(val name: String, val price: Double)
// Ø§Ù„Ø¢Ù† Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ price Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</pre>
          </div>

          <h3>Ø§Ù„Ø®Ø·Ø£ #3: Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø®Ø§Ø·Ø¦Ø©</h3>

          <div dir="ltr">
            <pre>// Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨Ù€ == vs ===
data class User(val name: String, val age: Int)

val user1 = User("Ali", 25)
val user2 = User("Ali", 25)
val user3 = user1

// == : Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ (Structural Equality)
println(user1 == user2)   // true (Ù†ÙØ³ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)

// === : Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù€ Reference (Referential Equality)
println(user1 === user2)  // false (Objects Ù…Ø®ØªÙ„ÙØ© ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©)
println(user1 === user3)  // true (Ù†ÙØ³ Ø§Ù„Ù€ Reference)</pre>
          </div>

          <div dir="ltr">
            <pre>Visual Representation:
Memory:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Heap:                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚ 0x5A â†’ User("Ali", 25) â† user1, user3
â”‚                                     â”‚
â”‚ 0x7B â†’ User("Ali", 25) â† user2      â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

user1 == user2   â†’ true  (Ù†ÙØ³ Ø§Ù„Ù…Ø­ØªÙˆÙ‰)
user1 === user2  â†’ false (Ø¹Ù†Ø§ÙˆÙŠÙ† Ù…Ø®ØªÙ„ÙØ©)
user1 === user3  â†’ true  (Ù†ÙØ³ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†)</pre>
          </div>

          <h3>Ø§Ù„Ø®Ø·Ø£ #4: Memory Leaks Ù…Ù† References</h3>

          <div dir="ltr">
            <pre>// âŒ Memory Leak Ø´Ø§Ø¦Ø¹
class MainActivity : AppCompatActivity() {
    
    private lateinit var callback: NetworkCallback
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        
        // Ø§Ù„Ù€ Callback ÙŠØ­ØªÙØ¸ Ø¨Ù€ Reference Ù„Ù„Ù€ Activity
        callback = object : NetworkCallback {
            override fun onSuccess(data: String) {
                // Ù‡Ù†Ø§ this@ ÙŠÙØ´ÙŠØ± Ù„Ù„Ù€ Activity
                updateUI(data)  // ğŸ”´ Reference Ù‚ÙˆÙŠ Ù„Ù„Ù€ Activity
            }
        }
        
        networkManager.register(callback)
    }
    
    // Ø¹Ù†Ø¯ ØªØ¯ÙˆÙŠØ± Ø§Ù„Ø´Ø§Ø´Ø©:
    // 1. Activity Ø§Ù„Ù‚Ø¯ÙŠÙ… ÙŠÙØ¯Ù…Ø±
    // 2. Ù„ÙƒÙ† networkManager Ù„Ø§ ÙŠØ²Ø§Ù„ ÙŠØ­ØªÙØ¸ Ø¨Ù€ callback
    // 3. callback ÙŠØ­ØªÙØ¸ Ø¨Ù€ Reference Ù„Ù„Ù€ Activity Ø§Ù„Ù‚Ø¯ÙŠÙ…
    // 4. Garbage Collector Ù„Ø§ ÙŠØ³ØªØ·ÙŠØ¹ Ø­Ø°Ù Ø§Ù„Ù€ Activity
    // 5. Memory Leak! ğŸ’¥
}</pre>
          </div>

          <div dir="ltr">
            <pre>// âœ… Ø§Ù„Ø­Ù„ 1: Ø§Ø³ØªØ®Ø¯Ù… WeakReference
class MainActivity : AppCompatActivity() {
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        
        val weakActivity = WeakReference(this)
        
        val callback = object : NetworkCallback {
            override fun onSuccess(data: String) {
                weakActivity.get()?.updateUI(data)
                // Ø¥Ø°Ø§ ØªÙ… ØªØ¯Ù…ÙŠØ± ActivityØŒ get() ØªØ±Ø¬Ø¹ null
            }
        }
        
        networkManager.register(callback)
    }
}

// âœ… Ø§Ù„Ø­Ù„ 2: Unregister ÙÙŠ onDestroy
override fun onDestroy() {
    super.onDestroy()
    networkManager.unregister(callback)  // Ø­Ø°Ù Ø§Ù„Ù€ Reference
}</pre>
          </div>

          <hr />

          <h2>Ø£Ù…Ø«Ù„Ø© ÙˆØ§Ù‚Ø¹ÙŠØ© Ù…Ù† Android ğŸ“±</h2>

          <h3>Ù…Ø«Ø§Ù„ 1: Intent Extras</h3>

          <div dir="ltr">
            <pre>// âŒ Ø®Ø·Ø£ Ø´Ø§Ø¦Ø¹
data class User(var name: String, var age: Int) : Serializable

// ÙÙŠ Activity A:
val user = User("Ali", 25)
val intent = Intent(this, ActivityB::class.java)
intent.putExtra("user", user)
startActivity(intent)

user.name = "Modified"  // Ø¹Ø¯Ù‘Ù„Ù†Ø§ user Ø¨Ø¹Ø¯ Ø¥Ø±Ø³Ø§Ù„Ù‡

// ÙÙŠ Activity B:
val receivedUser = intent.getSerializableExtra("user") as User
println(receivedUser.name)  // "Ali" â† Ù„Ù… ÙŠØªØ£Ø«Ø±!

// Ø§Ù„Ø³Ø¨Ø¨: Serialization ÙŠÙÙ†Ø´Ø¦ Ù†Ø³Ø®Ø© Ø¹Ù…ÙŠÙ‚Ø© (Deep Copy)
// Ù„ÙŠØ³ Ù…Ø¬Ø±Ø¯ Ù†Ø³Ø® Reference</pre>
          </div>

          <div dir="ltr">
            <pre>Serialization Process:
Activity A:                    Activity B:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ user Object  â”‚â”€â”€Serializeâ”€â”€>â”‚ new Object   â”‚
â”‚ 0x5A         â”‚              â”‚ 0x9F         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ø¹Ù†ÙˆØ§Ù† Ù…Ø®ØªÙ„Ù = Object Ù…Ø®ØªÙ„Ù = Ù„Ø§ ØªØ£Ø«Ø± Ø¨Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</pre>
          </div>

          <h3>Ù…Ø«Ø§Ù„ 2: LiveData vs MutableLiveData</h3>

          <div dir="ltr">
            <pre>// âŒ Ù…Ø´ÙƒÙ„Ø©: ØªØ¹Ø±ÙŠØ¶ MutableLiveData Ù…Ø¨Ø§Ø´Ø±Ø©
class UserViewModel : ViewModel() {
    val user = MutableLiveData&lt;User&gt;()
    
    // Ø£ÙŠ Ø£Ø­Ø¯ ÙŠÙ…ÙƒÙ†Ù‡ ØªØ¹Ø¯ÙŠÙ„ user Ù…Ù† Ø®Ø§Ø±Ø¬ ViewModel!
}

// ÙÙŠ Fragment:
viewModel.user.value = User("Hacked", 0)  // ğŸ”´ ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¨Ø§Ø´Ø±!


// âœ… Ø§Ù„Ø­Ù„: Encapsulation
class UserViewModel : ViewModel() {
    private val _user = MutableLiveData&lt;User&gt;()
    val user: LiveData&lt;User&gt; = _user  // Read-only Reference
    
    fun updateUser(newUser: User) {
        _user.value = newUser.copy()  // Ù†Ø³Ø®Ø© Ù…Ù†ÙØµÙ„Ø©
    }
}

// Ø§Ù„Ø¢Ù† ÙÙŠ Fragment:
viewModel.user.value = ...  // âŒ Compile Error!
viewModel.updateUser(...)   // âœ… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ÙˆØ­ÙŠØ¯Ø©</pre>
          </div>

          <h3>Ù…Ø«Ø§Ù„ 3: RecyclerView Adapter</h3>

          <div dir="ltr">
            <pre>// âŒ Ø®Ø·Ø£ Ø®ÙÙŠ ÙˆØ®Ø·ÙŠØ±
class ProductAdapter : RecyclerView.Adapter&lt;ProductViewHolder&gt;() {
    
    private var products: List&lt;Product&gt; = emptyList()
    
    fun updateProducts(newProducts: List&lt;Product&gt;) {
        products = newProducts
        notifyDataSetChanged()
    }
}

// ÙÙŠ Activity:
val products = mutableListOf(
    Product("Phone", 1000.0),
    Product("Laptop", 2000.0)
)

adapter.updateProducts(products)

// Ø¨Ø¹Ø¯ Ù‚Ù„ÙŠÙ„:
products[0].price = 1500.0  // ğŸ”´ Ø¹Ø¯Ù‘Ù„Ù†Ø§ Ø§Ù„Ø³Ø¹Ø±

// Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: adapter.products ØªÙØ´ÙŠØ± Ù„Ù†ÙØ³ Ø§Ù„Ù€ List!
// Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø³ÙŠØ¸Ù‡Ø± ÙÙŠ RecyclerView Ø¨Ø¯ÙˆÙ† notifyDataSetChanged()
// Ù„ÙƒÙ† Ø¨Ø·Ø±ÙŠÙ‚Ø© ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹Ø© ÙˆÙ…Ø±Ø¨ÙƒØ©!</pre>
          </div>

          <div dir="ltr">
            <pre>// âœ… Ø§Ù„Ø­Ù„: Ø§Ø³ØªØ®Ø¯Ù… DiffUtil ÙˆÙ†Ø³Ø® Ù…Ù†ÙØµÙ„Ø©
class ProductAdapter : RecyclerView.Adapter&lt;ProductViewHolder&gt;() {
    
    private var products: List&lt;Product&gt; = emptyList()
    
    fun updateProducts(newProducts: List&lt;Product&gt;) {
        val oldList = products
        // Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ù…Ù†ÙØµÙ„Ø©
        products = newProducts.map { it.copy() }
        
        val diffResult = DiffUtil.calculateDiff(
            ProductDiffCallback(oldList, products)
        )
        diffResult.dispatchUpdatesTo(this)
    }
}

// Ø§Ù„Ø¢Ù† Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© Ù„Ù† ØªØ¤Ø«Ø± Ø¹Ù„Ù‰ adapter</pre>
          </div>

          <h3>Ù…Ø«Ø§Ù„ 4: Singleton Pattern</h3>

          <div dir="ltr">
            <pre>// âŒ Ø®Ø·Ø£: Singleton ÙŠØ­ØªÙØ¸ Ø¨Ù€ References Ù„Ù„Ù€ Activities
object UserManager {
    var currentActivity: Activity? = null  // ğŸ”´ Memory Leak!
    private val listeners = mutableListOf&lt;UserListener&gt;()
    
    fun setActivity(activity: Activity) {
        currentActivity = activity
    }
    
    fun addListener(listener: UserListener) {
        listeners.add(listener)  // ğŸ”´ Ù‚Ø¯ ÙŠÙƒÙˆÙ† listener Ù…Ù† Activity
    }
}

// Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:
// 1. Singleton ÙŠØ¹ÙŠØ´ Ø·ÙˆØ§Ù„ Ø­ÙŠØ§Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
// 2. ÙŠØ­ØªÙØ¸ Ø¨Ù€ References Ù„Ù„Ù€ Activities
// 3. Activities Ù„Ø§ ØªÙØ­Ø°Ù Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø©
// 4. ÙƒÙ„ rotation ÙŠÙØ¶ÙŠÙ Activity Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø°Ø§ÙƒØ±Ø©
// 5. Out Of Memory Ø¨Ø¹Ø¯ Ø¹Ø¯Ø© rotations!</pre>
          </div>

          <div dir="ltr">
            <pre>// âœ… Ø§Ù„Ø­Ù„ 1: WeakReference
object UserManager {
    private var currentActivity: WeakReference&lt;Activity&gt;? = null
    
    fun setActivity(activity: Activity) {
        currentActivity = WeakReference(activity)
    }
    
    fun getActivity(): Activity? = currentActivity?.get()
}

// âœ… Ø§Ù„Ø­Ù„ 2: Ø§Ø³ØªØ®Ø¯Ù… Application Context
object UserManager {
    lateinit var appContext: Context
    
    fun init(application: Application) {
        appContext = application.applicationContext
        // Application Context Ø¢Ù…Ù†ØŒ Ù„Ø§ ÙŠØªØ³Ø¨Ø¨ ÙÙŠ Memory Leak
    }
}

// âœ… Ø§Ù„Ø­Ù„ 3: Lifecycle-Aware Listeners
fun addListener(lifecycleOwner: LifecycleOwner, listener: UserListener) {
    lifecycleOwner.lifecycle.addObserver(object : LifecycleObserver {
        @OnLifecycleEvent(Lifecycle.Event.ON_DESTROY)
        fun onDestroy() {
            listeners.remove(listener)  // Ø­Ø°Ù ØªÙ„Ù‚Ø§Ø¦ÙŠ
        }
    })
    listeners.add(listener)
}</pre>
          </div>

          <hr />

          <h2>Ø­Ù„ÙˆÙ„ ÙˆÙ…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ© ğŸ› ï¸</h2>

          <h3>1. Deep Copy vs Shallow Copy</h3>

          <div dir="ltr">
            <pre>data class Address(var city: String, var street: String)
data class User(var name: String, val address: Address)

val user1 = User("Ali", Address("Cairo", "St 1"))

// Shallow Copy (copy() ÙÙŠ data class)
val user2 = user1.copy()
user2.address.city = "Alex"

println(user1.address.city)  // "Alex" ğŸ”´ ØªØºÙŠØ±!

// Ø§Ù„Ø³Ø¨Ø¨: copy() ØªÙ†Ø³Ø® Ø§Ù„Ù€ References Ù„Ù„Ù€ Objects Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©
// Ù„ÙŠØ³ Ø§Ù„Ù€ Objects Ù†ÙØ³Ù‡Ø§!


// Deep Copy (Ù†Ø³Ø® Ø¹Ù…ÙŠÙ‚ ÙŠØ¯ÙˆÙŠ)
fun User.deepCopy(): User {
    return User(
        name = this.name,
        address = Address(
            city = this.address.city,
            street = this.address.street
        )
    )
}

val user3 = user1.deepCopy()
user3.address.city = "Giza"

println(user1.address.city)  // "Alex" âœ… Ù„Ù… ÙŠØªØºÙŠØ±!</pre>
          </div>

          <div dir="ltr">
            <pre>Visual Comparison:
Shallow Copy:
user1 â”€â”€> User Object
           â”‚
           â””â”€â”€> Address Object â†â”€â”€ user2.address
                                    (Ù†ÙØ³ Ø§Ù„Ù€ Reference!)

Deep Copy:
user1 â”€â”€> User Object â”€â”€> Address Object (0x5A)
user3 â”€â”€> User Object â”€â”€> Address Object (0x7B)
                          (Objects Ù…Ù†ÙØµÙ„Ø©!)</pre>
          </div>

          <h3>2. Immutable Data Classes</h3>

          <div dir="ltr">
            <pre>// âœ… Ø£ÙØ¶Ù„ Ù…Ù…Ø§Ø±Ø³Ø©: Ø§Ø³ØªØ®Ø¯Ù… val Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† var
data class User(
    val name: String,      // Immutable
    val age: Int,          // Immutable
    val email: String      // Immutable
)

// Ø§Ù„Ø¢Ù† Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ø£ÙŠ property:
val user = User("Ali", 25, "ali@example.com")
user.name = "Modified"  // âŒ Compile Error!

// Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ØŒ ÙŠØ¬Ø¨ Ø¥Ù†Ø´Ø§Ø¡ object Ø¬Ø¯ÙŠØ¯:
val modifiedUser = user.copy(age = 26)

// Ø§Ù„ÙÙˆØ§Ø¦Ø¯:
// 1. Thread-Safe ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
// 2. Ù„Ø§ Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Reference Sharing
// 3. Ø³Ù‡Ù„ Ø§Ù„ØªØªØ¨Ø¹ ÙˆØ§Ù„Ù€ Debugging
// 4. ÙŠÙ…Ù†Ø¹ Bugs Ø®ÙÙŠØ© ÙƒØ«ÙŠØ±Ø©</pre>
          </div>

          <h3>3. Defensive Copying</h3>

          <div dir="ltr">
            <pre>// âŒ Ù…Ø´ÙƒÙ„Ø©: ØªØ¹Ø±ÙŠØ¶ Internal State Ù…Ø¨Ø§Ø´Ø±Ø©
class ShoppingCart {
    private val items = mutableListOf&lt;Product&gt;()
    
    fun getItems(): List&lt;Product&gt; = items  // ğŸ”´ ÙŠÙØ¹Ø±Ù‘Ø¶ Reference!
}

val cart = ShoppingCart()
val items = cart.getItems() as MutableList
items.clear()  // ğŸ”´ Ø­Ø°ÙÙ†Ø§ ÙƒÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª Ù…Ù† Ø§Ù„Ø¯Ø§Ø®Ù„!


// âœ… Ø§Ù„Ø­Ù„: Defensive Copying
class ShoppingCart {
    private val _items = mutableListOf&lt;Product&gt;()
    
    // Ø¥Ø±Ø¬Ø§Ø¹ Ù†Ø³Ø®Ø© ØºÙŠØ± Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„
    fun getItems(): List&lt;Product&gt; = _items.toList()
    
    // Ø£Ùˆ Ø¥Ø±Ø¬Ø§Ø¹ Ù†Ø³Ø®Ø© Ø¹Ù…ÙŠÙ‚Ø©
    fun getItemsCopy(): List&lt;Product&gt; = _items.map { it.copy() }
    
    // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙÙ‚Ø· Ù…Ù† Ø®Ù„Ø§Ù„ Methods Ù…Ø­Ø¯Ø¯Ø©
    fun addItem(product: Product) {
        _items.add(product.copy())  // Ù†Ø®Ø²Ù† Ù†Ø³Ø®Ø©
    }
    
    fun removeItem(product: Product) {
        _items.removeIf { it.id == product.id }
    }
}</pre>
          </div>

          <h3>4. Ø§Ø³ØªØ®Ø¯Ø§Ù… Sealed Classes Ù„Ù„Ø­Ù…Ø§ÙŠØ©</h3>

          <div dir="ltr">
            <pre>// âœ… Ù†Ù…Ø· Ø§Ø­ØªØ±Ø§ÙÙŠ: Result Wrapper
sealed class Result&lt;out T&gt; {
    data class Success&lt;T&gt;(val data: T) : Result&lt;T&gt;()
    data class Error(val exception: Exception) : Result&lt;Nothing&gt;()
    object Loading : Result&lt;Nothing&gt;()
}

// Ø§Ù„Ø¢Ù† Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù€ State Ù…Ù† Ø§Ù„Ø®Ø§Ø±Ø¬:
class UserRepository {
    private val _userState = MutableLiveData&lt;Result&lt;User&gt;&gt;()
    val userState: LiveData&lt;Result&lt;User&gt;&gt; = _userState
    
    suspend fun loadUser() {
        _userState.value = Result.Loading
        
        try {
            val user = api.getUser()
            _userState.value = Result.Success(user)
        } catch (e: Exception) {
            _userState.value = Result.Error(e)
        }
    }
}

// Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¢Ù…Ù†:
viewModel.userState.observe(this) { result ->
    when (result) {
        is Result.Success -> updateUI(result.data)
        is Result.Error -> showError(result.exception)
        is Result.Loading -> showLoading()
    }
}</pre>
          </div>

          <hr />

          <h2>Ø§Ù„Ø®Ù„Ø§ØµØ© ÙˆØ§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø°Ù‡Ø¨ÙŠØ© ğŸ“</h2>

          <h3>Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø´Ø§Ù…Ù„:</h3>

          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ù…ÙÙ‡ÙˆÙ…</th>
                <th>Value Type</th>
                <th>Reference Type</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Ø§Ù„ØªØ®Ø²ÙŠÙ†</strong></td>
                <td>Stack (Ø§Ù„Ù‚ÙŠÙ…Ø© Ù†ÙØ³Ù‡Ø§)</td>
                <td>Stack (Ø¹Ù†ÙˆØ§Ù†) + Heap (Object)</td>
              </tr>
              <tr>
                <td><strong>Ø§Ù„Ù†Ø³Ø®</strong></td>
                <td>Ù†Ø³Ø® Ø§Ù„Ù‚ÙŠÙ…Ø© (Independent)</td>
                <td>Ù†Ø³Ø® Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Shared)</td>
              </tr>
              <tr>
                <td><strong>Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø©</strong></td>
                <td>Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù‚ÙŠÙ…</td>
                <td>== Ù„Ù„Ù…Ø­ØªÙˆÙ‰ØŒ === Ù„Ù„Ø¹Ù†ÙˆØ§Ù†</td>
              </tr>
              <tr>
                <td><strong>Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</strong></td>
                <td>Ù„Ø§ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ù†ÙØ³Ø® Ø£Ø®Ø±Ù‰</td>
                <td>ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ ÙƒÙ„ Ø§Ù„Ù€ References</td>
              </tr>
              <tr>
                <td><strong>Ø§Ù„Ø­Ø°Ù</strong></td>
                <td>ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ Ù†Ù‡Ø§ÙŠØ© Scope</td>
                <td>Garbage Collector</td>
              </tr>
              <tr>
                <td><strong>Ø§Ù„Ø£Ù…Ø«Ù„Ø©</strong></td>
                <td>Int, Boolean, Char</td>
                <td>Objects, Lists, Arrays</td>
              </tr>
            </tbody>
          </table>

          <h3>Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø°Ù‡Ø¨ÙŠØ© Ø§Ù„Ù€ 10:</h3>

          <div dir="ltr">
            <pre>1. âœ… Ø§Ø³ØªØ®Ø¯Ù… val Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† var Ù…ØªÙ‰ Ø£Ù…ÙƒÙ†
   â†’ Immutability = Ø£Ù…Ø§Ù†

2. âœ… Ø§Ø³ØªØ®Ø¯Ù… copy() Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© Ù„ØªØ¹Ø¯ÙŠÙ„ Data Class
   â†’ val modified = original.copy(field = newValue)

3. âœ… Ù„Ø§ ØªÙØ¹Ø±Ù‘Ø¶ MutableList Ø£Ùˆ MutableLiveData Ù…Ø¨Ø§Ø´Ø±Ø©
   â†’ Ø§Ø³ØªØ®Ø¯Ù… Encapsulation

4. âœ… Ø§Ø³ØªØ®Ø¯Ù… Defensive Copying ÙÙŠ Public APIs
   â†’ fun getItems() = _items.toList()

5. âœ… Ø§Ø­Ø°Ø± Ù…Ù† Shallow Copy ÙÙŠ Nested Objects
   â†’ Ø§Ø³ØªØ®Ø¯Ù… Deep Copy Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø©

6. âœ… Ø§Ø³ØªØ®Ø¯Ù… WeakReference Ù…Ø¹ Singletons ÙˆØ§Ù„Ù€ Callbacks
   â†’ ØªØ¬Ù†Ø¨ Memory Leaks

7. âœ… Ø§ÙÙ‡Ù… Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† == Ùˆ ===
   â†’ == Ù„Ù„Ù…Ø­ØªÙˆÙ‰ØŒ === Ù„Ù„Ø¹Ù†ÙˆØ§Ù†

8. âœ… Ø§Ø³ØªØ®Ø¯Ù… DiffUtil ÙÙŠ RecyclerView
   â†’ ØªØ¬Ù†Ø¨ Ù…Ø´Ø§ÙƒÙ„ References ÙÙŠ Lists

9. âœ… Ù„Ø§ ØªØ­ØªÙØ¸ Ø¨Ù€ Activity/Fragment References ÙÙŠ Singletons
   â†’ Ø§Ø³ØªØ®Ø¯Ù… Application Context Ø£Ùˆ LifecycleOwner

10. âœ… Ø§Ø³ØªØ®Ø¯Ù… Sealed Classes Ù„Ù„Ù€ State Management
    â†’ Result&lt;T&gt;, UiState&lt;T&gt;, etc.</pre>
          </div>

          <h3>Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø¨ØªØ¯Ø¦ ÙˆØ§Ù„Ù…Ø­ØªØ±Ù:</h3>

          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ù…Ø¨ØªØ¯Ø¦</th>
                <th>Ø§Ù„Ù…Ø­ØªØ±Ù</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>ÙŠØ¹ØªÙ‚Ø¯ Ø£Ù† = Ø¯Ø§Ø¦Ù…Ø§Ù‹ ÙŠÙ†Ø³Ø® Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</td>
                <td>ÙŠØ¹Ø±Ù Ù…ØªÙ‰ ÙŠÙ†Ø³Ø® Value ÙˆÙ…ØªÙ‰ ÙŠÙ†Ø³Ø® Reference</td>
              </tr>
              <tr>
                <td>ÙŠÙØ¹Ø¯Ù‘Ù„ Objects Ù…Ø¨Ø§Ø´Ø±Ø©</td>
                <td>ÙŠØ³ØªØ®Ø¯Ù… copy() Ø£Ùˆ ÙŠÙÙ†Ø´Ø¦ objects Ø¬Ø¯ÙŠØ¯Ø©</td>
              </tr>
              <tr>
                <td>ÙŠÙØ¹Ø±Ù‘Ø¶ MutableLiveData Ù…Ø¨Ø§Ø´Ø±Ø©</td>
                <td>ÙŠØ³ØªØ®Ø¯Ù… private _field + public field pattern</td>
              </tr>
              <tr>
                <td>Ù„Ø§ ÙŠÙÙ‡Ù… Memory Leaks Ù…Ù† References</td>
                <td>ÙŠØ³ØªØ®Ø¯Ù… WeakReference ÙˆÙŠØ±Ø§Ù‚Ø¨ Lifecycle</td>
              </tr>
              <tr>
                <td>ÙŠØ³ØªØ®Ø¯Ù… var ÙÙŠ ÙƒÙ„ Ù…ÙƒØ§Ù†</td>
                <td>ÙŠÙØ¶Ù„ val ÙˆÙŠØ³ØªØ®Ø¯Ù… var ÙÙ‚Ø· Ø¹Ù†Ø¯ Ø§Ù„Ø¶Ø±ÙˆØ±Ø©</td>
              </tr>
              <tr>
                <td>ÙŠÙ‚Ø§Ø±Ù† Objects Ø¨Ù€ ===</td>
                <td>ÙŠØ¹Ø±Ù Ù…ØªÙ‰ ÙŠØ³ØªØ®Ø¯Ù… == ÙˆÙ…ØªÙ‰ ===</td>
              </tr>
            </tbody>
          </table>

          <hr />

          <h2>Ø£Ù…Ø«Ù„Ø© Ø¥Ø¶Ø§ÙÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø© ğŸš€</h2>

          <h3>Ù…Ø«Ø§Ù„ 5: StateFlow vs SharedFlow</h3>

          <div dir="ltr">
            <pre>class UserViewModel : ViewModel() {
    
    // âŒ Ù…Ø´ÙƒÙ„Ø©: MutableStateFlow Ù…ÙØ¹Ø±Ù‘Ø¶ Ù…Ø¨Ø§Ø´Ø±Ø©
    val userState = MutableStateFlow&lt;User?&gt;(null)
    
    // Ø£ÙŠ Ø£Ø­Ø¯ ÙŠÙ…ÙƒÙ†Ù‡:
    // viewModel.userState.value = User(...)
}


// âœ… Ø§Ù„Ø­Ù„: Encapsulation
class UserViewModel : ViewModel() {
    
    private val _userState = MutableStateFlow&lt;User?&gt;(null)
    val userState: StateFlow&lt;User?&gt; = _userState.asStateFlow()
    
    fun updateUser(user: User) {
        _userState.value = user.copy()  // Ù†Ø³Ø®Ø© Ù…Ù†ÙØµÙ„Ø©
    }
    
    // Ø§Ù„Ø¢Ù† Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙÙ‚Ø· Ù…Ù† Ø®Ù„Ø§Ù„ ViewModel
}</pre>
          </div>

          <h3>Ù…Ø«Ø§Ù„ 6: Room Database</h3>

          <div dir="ltr">
            <pre>// âŒ Ù…Ø´ÙƒÙ„Ø©: Ø¥Ø±Ø¬Ø§Ø¹ Mutable Objects Ù…Ù† Database
@Dao
interface UserDao {
    @Query("SELECT * FROM users")
    fun getAllUsers(): List&lt;User&gt;  // ğŸ”´ ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
}

// ÙÙŠ Repository:
val users = userDao.getAllUsers()
users[0].name = "Modified"  // ğŸ”´ Ø¹Ø¯Ù‘Ù„Ù†Ø§ ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©
// Ù„ÙƒÙ† Database Ù„Ù… ÙŠØªØ­Ø¯Ø«!


// âœ… Ø§Ù„Ø­Ù„ 1: Ø§Ø³ØªØ®Ø¯Ù… Flow
@Dao
interface UserDao {
    @Query("SELECT * FROM users")
    fun getAllUsers(): Flow&lt;List&lt;User&gt;&gt;  // Auto-update
}

// âœ… Ø§Ù„Ø­Ù„ 2: Ø¥Ø±Ø¬Ø§Ø¹ Read-Only List
@Dao
interface UserDao {
    @Query("SELECT * FROM users")
    fun getAllUsers(): List&lt;User&gt;
}

class UserRepository(private val dao: UserDao) {
    fun getUsers(): List&lt;User&gt; {
        return dao.getAllUsers().map { it.copy() }  // Ù†Ø³Ø® Ù…Ù†ÙØµÙ„Ø©
    }
}</pre>
          </div>

          <h3>Ù…Ø«Ø§Ù„ 7: Parcelize</h3>

          <div dir="ltr">
            <pre>// Parcelize vs Serializable
@Parcelize
data class User(
    val name: String,
    val age: Int,
    val address: Address  // Nested Object
) : Parcelable

@Parcelize
data class Address(
    val city: String,
    val street: String
) : Parcelable

// ÙÙŠ Activity A:
val user = User("Ali", 25, Address("Cairo", "St 1"))
val intent = Intent(this, ActivityB::class.java)
intent.putExtra("user", user)
startActivity(intent)

user.address.city = "Alex"  // Ø¹Ø¯Ù‘Ù„Ù†Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„

// ÙÙŠ Activity B:
val receivedUser = intent.getParcelableExtra&lt;User&gt;("user")
println(receivedUser?.address?.city)  // "Cairo" âœ…

// Parcelable ÙŠÙÙ†Ø´Ø¦ Ù†Ø³Ø®Ø© Ø¹Ù…ÙŠÙ‚Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
// Ø­ØªÙ‰ Ù„Ù„Ù€ Nested Objects!</pre>
          </div>

          <hr />

          <h2>Ø£Ø³Ø¦Ù„Ø© Ø´Ø§Ø¦Ø¹Ø© (FAQ) ğŸ’­</h2>

          <h3>Ø³1: Ù‡Ù„ String Ù‡Ùˆ Value Type Ø£Ù… Reference TypeØŸ</h3>
          <p>
            <strong>Reference Type</strong> Ù„ÙƒÙ†Ù‡ <strong>Immutable</strong>. ÙŠÙØ®Ø²Ù† Ø¹Ù„Ù‰ Heap Ù„ÙƒÙ† Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„Ù‡ØŒ Ù„Ø°Ù„Ùƒ ÙŠØªØµØ±Ù ÙƒÙ€ Value Type ÙÙŠ Ù…Ø¹Ø¸Ù… Ø§Ù„Ø­Ø§Ù„Ø§Øª.
          </p>

          <div dir="ltr">
            <pre>var s1 = "Hello"
val s2 = s1
s1 = "World"  // Ø¥Ù†Ø´Ø§Ø¡ String Ø¬Ø¯ÙŠØ¯ØŒ Ù„ÙŠØ³ ØªØ¹Ø¯ÙŠÙ„

println(s2)  // "Hello" â† Ù„Ù… ÙŠØªØ£Ø«Ø±</pre>
          </div>

          <h3>Ø³2: Ù„Ù…Ø§Ø°Ø§ copy() Ù„Ø§ ÙŠØ¹Ù…Ù„ Ù…Ø¹ Nested ObjectsØŸ</h3>
          <p>
            Ù„Ø£Ù† <code>copy()</code> ØªÙÙ†ÙØ° <strong>Shallow Copy</strong>. ØªÙ†Ø³Ø® Ø§Ù„Ù€ References Ù„Ù„Ù€ Objects Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©ØŒ Ù„ÙŠØ³ Ø§Ù„Ù€ Objects Ù†ÙØ³Ù‡Ø§.
          </p>

          <h3>Ø³3: Ù…ØªÙ‰ Ø£Ø³ØªØ®Ø¯Ù… === Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† ==ØŸ</h3>
          <p>
            Ø§Ø³ØªØ®Ø¯Ù… <code>===</code> Ø¹Ù†Ø¯Ù…Ø§ ØªØ±ÙŠØ¯ Ø§Ù„ØªØ£ÙƒØ¯ Ø£Ù† Ù…ØªØºÙŠØ±ÙŠÙ† ÙŠÙØ´ÙŠØ±Ø§Ù† Ù„Ù†ÙØ³ Ø§Ù„Ù€ Object ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø© (Ù†ÙØ³ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†)ØŒ Ù…Ø«Ù„ Singleton Checks.
          </p>

          <h3>Ø³4: Ù‡Ù„ Array Ù‡Ùˆ Value TypeØŸ</h3>
          <p>
            <strong>Ù„Ø§.</strong> Array Ù‡Ùˆ Reference TypeØŒ Ù„ÙƒÙ† Ù…Ø­ØªÙˆÙŠØ§ØªÙ‡ Ù‚Ø¯ ØªÙƒÙˆÙ† Value Types (Ù…Ø«Ù„ IntArray).
          </p>

          <div dir="ltr">
            <pre>val arr1 = intArrayOf(1, 2, 3)
val arr2 = arr1  // Ù†Ø³Ø® Reference
arr2[0] = 10

println(arr1[0])  // 10 â† ØªØ£Ø«Ø±!</pre>
          </div>

          <h3>Ø³5: ÙƒÙŠÙ Ø£ØªØ¬Ù†Ø¨ Memory Leaks Ù…Ù† ReferencesØŸ</h3>
          <p>
            <strong>3 Ø­Ù„ÙˆÙ„ Ø£Ø³Ø§Ø³ÙŠØ©:</strong><br />
            1. Ø§Ø³ØªØ®Ø¯Ù… <code>WeakReference</code><br />
            2. Unregister Listeners ÙÙŠ <code>onDestroy()</code><br />
            3. Ø§Ø³ØªØ®Ø¯Ù… <code>LifecycleObserver</code> Ù„Ù„Ø­Ø°Ù Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
          </p>

          <hr />

          <h2>Ø®Ø§ØªÙ…Ø© ğŸ</h2>

          <blockquote>
            <strong>ÙÙ‡Ù… Reference vs Value Ù„ÙŠØ³ Ø±ÙØ§Ù‡ÙŠØ©</strong><br />
            Ù‡Ùˆ Ø§Ù„Ø£Ø³Ø§Ø³ Ù„Ù€:<br />
            â€¢ ÙƒØªØ§Ø¨Ø© ÙƒÙˆØ¯ Ø¢Ù…Ù† ÙˆØ®Ø§Ù„ÙŠ Ù…Ù† Bugs Ø®ÙÙŠØ©<br />
            â€¢ ØªØ¬Ù†Ø¨ Memory Leaks<br />
            â€¢ ÙÙ‡Ù… Ø³Ù„ÙˆÙƒ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚<br />
            â€¢ Ø§ØªØ®Ø§Ø° Ù‚Ø±Ø§Ø±Ø§Øª ØªØµÙ…ÙŠÙ… ØµØ­ÙŠØ­Ø©<br />
            â€¢ Ø§Ù„Ù€ Debugging Ø¨ÙƒÙØ§Ø¡Ø©<br />
            <br />
            <strong>Ø§Ù„Ù…Ù‡Ù†Ø¯Ø³ Ø§Ù„Ù…Ø­ØªØ±Ù ÙŠØ¹Ø±Ù Ù…ØªÙ‰ ÙŠÙ†Ø³Ø® Ø§Ù„Ù‚ÙŠÙ…Ø© ÙˆÙ…ØªÙ‰ ÙŠÙ†Ø³Ø® Ø§Ù„Ù…Ø±Ø¬Ø¹.</strong>
          </blockquote>

          <div class="success">
            <strong>âœ¨ Ø§Ù„ØªÙ…Ø±ÙŠÙ† Ø§Ù„Ø¹Ù…Ù„ÙŠ:</strong><br />
            Ø¬Ø±Ù‘Ø¨ Ø§Ù„Ø¢Ù†:<br />
            1. Ø£Ù†Ø´Ø¦ Data Class Ù…Ø¹ Nested Object<br />
            2. Ø§Ø³ØªØ®Ø¯Ù… copy() ÙˆØ´Ø§Ù‡Ø¯ Shallow Copy<br />
            3. Ø§ÙƒØªØ¨ Deep Copy ÙŠØ¯ÙˆÙŠØ§Ù‹<br />
            4. Ù‚Ø§Ø±Ù† Ø¨ÙŠÙ† == Ùˆ === ÙÙŠ Ø£Ù…Ø«Ù„Ø© Ù…Ø®ØªÙ„ÙØ©<br />
            5. Ø±Ø§Ù‚Ø¨ Memory Profiler ÙÙŠ Android Studio
          </div>

          <div class="warning">
            <strong>âš ï¸ ØªØ°ÙƒØ± Ø¯Ø§Ø¦Ù…Ø§Ù‹:</strong><br />
            â€¢ <code>=</code> ÙŠÙ†Ø³Ø® Ø§Ù„Ù‚ÙŠÙ…Ø© Ù„Ù„Ù€ Primitives<br />
            â€¢ <code>=</code> ÙŠÙ†Ø³Ø® Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ù„Ù„Ù€ Objects<br />
            â€¢ <code>copy()</code> ØªÙ†ÙØ° Shallow Copy<br />
            â€¢ <code>val</code> Ù„Ø§ ÙŠØ¹Ù†ÙŠ Immutable Ù„Ù„Ù€ Nested Objects<br />
            â€¢ Reference Sharing Ù‚Ø¯ ÙŠØ³Ø¨Ø¨ Bugs Ø®ÙÙŠØ© Ø®Ø·ÙŠØ±Ø©
          </div>

        </div>
      </div>
    </div>
  </div>
</body>
</html>