<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <title>Mutability vs Immutability ÙÙŠ Android</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f7f8fa;
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --border: #e5e7eb;
      --accent: #2563eb;
      --code-bg: #666666;
      --code-text: #ffffff;
    }

    * {
      box-sizing: border-box;
      font-family: 'Nunito', 'Segoe UI', Tahoma, Arial, sans-serif;
    }

    body {
      margin: 0;
      font-family: 'Nunito', 'Segoe UI', Tahoma, Arial, sans-serif; 
      background: var(--bg);
      color: var(--text);
      line-height: 1.8;
    }

    .page {
      max-width: 980px;
      margin: auto;
      padding: 32px 16px;
    }

    .content {
      background: var(--card);
      border-radius: 12px;
      padding: 32px;
      border: 1px solid var(--border);
    }

    h1, h2, h3, h4 {
      color: #111827;
      margin-top: 32px;
    }

    h1 {
      font-size: 2.1rem;
      border-bottom: 3px solid var(--accent);
      padding-bottom: 8px;
    }

    h2 {
      font-size: 1.6rem;
      border-right: 4px solid var(--accent);
      padding-right: 12px;
    }

    h3 {
      font-size: 1.3rem;
    }

    h4 {
      font-size: 1.1rem;
      color: #374151;
    }

    p {
      margin: 12px 0;
    }

    hr {
      margin: 40px 0;
      border: none;
      height: 1px;
      background: var(--border);
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
      font-size: 0.95rem;
    }

    table th,
    table td {
      border: 1px solid var(--border);
      padding: 10px;
      text-align: right;
    }

    table th {
      background: #f1f5f9;
      font-weight: 600;
    }

    ul, ol {
      padding-right: 20px;
    }

    blockquote {
      background: #f1f5f9;
      border-right: 4px solid var(--accent);
      padding: 12px 16px;
      margin: 16px 0;
      color: #374151;
    }

    pre {
      background: var(--code-bg);
      color: var(--code-text);
      padding: 16px;
      border-radius: 10px;
      overflow-x: auto;
      margin: 16px 0;
      font-size: 0.9rem;
      direction: ltr;
      text-align: left;
    }

    code {
      font-family: 'Courier New', monospace;
    }

    p code {
      background: #eef2ff;
      color: #1e40af;
      padding: 2px 6px;
      border-radius: 6px;
      font-size: 0.85em;
    }

    section {
      margin-bottom: 32px;
    }

    .warning {
      background: #fef2f2;
      border-right: 4px solid #dc2626;
      padding: 12px 16px;
      margin: 16px 0;
      color: #991b1b;
    }

    .success {
      background: #f0fdf4;
      border-right: 4px solid #16a34a;
      padding: 12px 16px;
      margin: 16px 0;
      color: #166534;
    }

    @media (max-width: 600px) {
      .content {
        padding: 20px;
      }

      h1 {
        font-size: 1.7rem;
      }

      h2 {
        font-size: 1.4rem;
      }
    }
  </style>
</head>

<body>
  <div class="page">
    <div class="content">
      <div class="crossnote markdown-preview">
        <div dir="rtl">
          <h1>Ù…Ø§ Ù…Ø¹Ù†Ù‰ Mutability vs Immutability ÙˆÙ„Ù…Ø§Ø°Ø§ ØªØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ØŸ ğŸ”’</h1>

          <h2>Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª</h2>
          <p>
            1 - Ø§Ù„Ù…ÙÙ‡ÙˆÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ÙˆØ§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ†Ù‡Ù…Ø§<br />
            2 - ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ø°Ù„Ùƒ ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø© (Memory Model)<br />
            3 - ØªØ£Ø«ÙŠØ±Ù‡Ù…Ø§ Ø¹Ù„Ù‰ Thread Safety<br />
            4 - Immutability ÙÙŠ Android ØªØ­Ø¯ÙŠØ¯Ù‹Ø§<br />
            5 - Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø§Ù„ØªÙŠ ØªØ­Ø¯Ø« Ø¨Ø³Ø¨Ø¨ Mutability<br />
            6 - Ø£Ù…Ø«Ù„Ø© Ø¹Ù…Ù„ÙŠØ© Ù…Ù† Android Development<br />
            7 - Best Practices ÙˆØ§Ù„Ø­Ù„ÙˆÙ„<br />
            8 - Ø§Ù„Ø®Ù„Ø§ØµØ©
          </p>

          <hr />

          <h2>Ø§Ù„Ù…ÙÙ‡ÙˆÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ğŸ¯</h2>

          <h3>Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø¨Ø³ÙŠØ·:</h3>

          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ù…ÙÙ‡ÙˆÙ…</th>
                <th>Ø§Ù„ØªØ¹Ø±ÙŠÙ</th>
                <th>Ù…Ø«Ø§Ù„ Ù…Ù† Ø§Ù„Ø­ÙŠØ§Ø©</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Mutable</strong></td>
                <td>ÙƒØ§Ø¦Ù† ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ù…Ø­ØªÙˆØ§Ù‡ Ø¨Ø¹Ø¯ Ø¥Ù†Ø´Ø§Ø¦Ù‡</td>
                <td>ÙƒÙˆØ¨ Ù…Ø§Ø¡ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø³ÙƒØ± Ù„Ù‡ Ø£Ùˆ ØªÙØ±ÙŠØºÙ‡</td>
              </tr>
              <tr>
                <td><strong>Immutable</strong></td>
                <td>ÙƒØ§Ø¦Ù† Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„Ù‡ Ø¨Ø¹Ø¯ Ø¥Ù†Ø´Ø§Ø¦Ù‡ Ù†Ù‡Ø§Ø¦ÙŠÙ‹Ø§</td>
                <td>ÙˆØ±Ù‚Ø© Ù†Ù‚Ø¯ÙŠØ© Ù…Ø·Ø¨ÙˆØ¹Ø©ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØºÙŠÙŠØ± Ù‚ÙŠÙ…ØªÙ‡Ø§</td>
              </tr>
            </tbody>
          </table>

          <blockquote>
            <strong>Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©:</strong><br />
            Immutability = Once Created, Never Changed<br />
            Ø£ÙŠ ØªØ¹Ø¯ÙŠÙ„ = Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø¬Ø¯ÙŠØ¯Ø© ØªÙ…Ø§Ù…Ù‹Ø§
          </blockquote>

          <h3>Ø£Ù…Ø«Ù„Ø© Ø£Ø³Ø§Ø³ÙŠØ© ÙÙŠ Kotlin:</h3>

          <div dir="ltr">
            <pre>// âœ… Immutable: Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
val name: String = "Ahmed"
name = "Ali"  // âŒ Compilation Error: Val cannot be reassigned

val numbers: List&lt;Int&gt; = listOf(1, 2, 3)
numbers.add(4)  // âŒ Error: Unresolved reference (no add() method)


// âŒ Mutable: ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
var age: Int = 25
age = 26  // âœ… OK

val mutableList: MutableList&lt;Int&gt; = mutableListOf(1, 2, 3)
mutableList.add(4)  // âœ… OK, Ø§Ù„Ù€ reference Ø«Ø§Ø¨Øª Ù„ÙƒÙ† Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…ØªØºÙŠØ±</pre>
          </div>

          <div class="warning">
            <strong>âš ï¸ Ù…ÙÙ‡ÙˆÙ… Ø´Ø§Ø¦Ø¹ Ø®Ø§Ø·Ø¦:</strong><br />
            <code>val</code> Ù„Ø§ ØªØ¹Ù†ÙŠ Immutable Ø¯Ø§Ø¦Ù…Ù‹Ø§!<br />
            <code>val</code> ØªØ¹Ù†ÙŠ Ø£Ù† Ø§Ù„Ù€ <strong>Reference Ø«Ø§Ø¨Øª</strong>ØŒ Ù„ÙƒÙ† Ø§Ù„ÙƒØ§Ø¦Ù† Ù†ÙØ³Ù‡ Ù‚Ø¯ ÙŠÙƒÙˆÙ† Mutable
          </div>

          <div dir="ltr">
            <pre>val user = User(name = "Ahmed", age = 25)
user = User(name = "Ali", age = 30)  // âŒ Error: val cannot be reassigned

user.name = "Ali"  // âœ… OK Ø¥Ø°Ø§ ÙƒØ§Ù† User Ù…Ù† Ù†ÙˆØ¹ class Ø¹Ø§Ø¯ÙŠ
user.age = 30      // âœ… OK

// Ø§Ù„Ø­Ù„: data class with val properties
data class User(val name: String, val age: Int)  // Immutable Object</pre>
          </div>

          <hr />

          <h2>ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ø°Ù„Ùƒ ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©ØŸ ğŸ§ </h2>

          <h3>Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 1: Immutable Object (String)</h3>

          <div dir="ltr">
            <pre>var text = "Hello"
text = "World"

// Ù…Ø§ ÙŠØ­Ø¯Ø« ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Heap Memory                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  [0x1000]  "Hello"  â† Ù„Ù… ÙŠÙØ­Ø°Ù ÙÙˆØ±Ù‹Ø§    â”‚
â”‚                       (GC Ø³ÙŠØ­Ø°ÙÙ‡ Ù„Ø§Ø­Ù‚Ù‹Ø§)â”‚
â”‚                                         â”‚
â”‚  [0x2000]  "World"  â† Ù†Ø³Ø®Ø© Ø¬Ø¯ÙŠØ¯Ø©       â”‚
â”‚              â†‘                          â”‚
â”‚              â”‚                          â”‚
â”‚            text â† Ø§Ù„Ù…ØªØºÙŠØ± ÙŠØ´ÙŠØ± Ù„Ù„Ø¬Ø¯ÙŠØ¯   â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
          </div>

          <h3>Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ 2: Mutable Object (ArrayList)</h3>

          <div dir="ltr">
            <pre>val list = mutableListOf(1, 2, 3)
list.add(4)

// Ù…Ø§ ÙŠØ­Ø¯Ø« ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Heap Memory                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  [0x3000]  ArrayList                    â”‚
â”‚            â”œâ”€ [1, 2, 3]  â† Before       â”‚
â”‚            â””â”€ [1, 2, 3, 4]  â† After     â”‚
â”‚              â†‘                          â”‚
â”‚              â”‚                          â”‚
â”‚            list â† Ù†ÙØ³ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†          â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// Ø§Ù„ÙØ±Ù‚ Ø§Ù„Ø¬ÙˆÙ‡Ø±ÙŠ:
// Immutable: Ø¹Ù†ÙˆØ§Ù† Ø¬Ø¯ÙŠØ¯ Ù„ÙƒÙ„ ØªØ¹Ø¯ÙŠÙ„
// Mutable: Ù†ÙØ³ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†ØŒ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙŠØªØºÙŠØ±</pre>
          </div>

          <h3>Ù„Ù…Ø§Ø°Ø§ Ù‡Ø°Ø§ Ù…Ù‡Ù… ÙÙŠ AndroidØŸ</h3>

          <div dir="ltr">
            <pre>// Ù…Ø«Ø§Ù„ ÙˆØ§Ù‚Ø¹ÙŠ: SharedPreferences
class SettingsManager(context: Context) {
    private val prefs = context.getSharedPreferences("settings", MODE_PRIVATE)
    
    // âŒ Ø®Ø·Ø£ Ø´Ø§Ø¦Ø¹: Ø¥Ø±Ø¬Ø§Ø¹ Mutable Collection
    fun getBlockedUsers(): MutableSet&lt;String&gt; {
        return prefs.getStringSet("blocked", mutableSetOf())!!
    }
}

// ÙÙŠ Ù…ÙƒØ§Ù† Ø¢Ø®Ø±:
val blocked = settingsManager.getBlockedUsers()
blocked.add("user123")  // âš ï¸ Ù‡Ù„ ØªÙ… Ø§Ù„Ø­ÙØ¸ØŸ Ù„Ø§!

// Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:
// SharedPreferences ÙŠØ±Ø¬Ø¹ reference Ù„Ù„Ù€ Set Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ
// Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¹Ù„ÙŠÙ‡ Ù„Ø§ ÙŠÙØ­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§!</pre>
          </div>

          <hr />

          <h2>ØªØ£Ø«ÙŠØ±Ù‡Ù…Ø§ Ø¹Ù„Ù‰ Thread Safety ğŸ”</h2>

          <h3>Ø§Ù„Ù…ÙÙ‡ÙˆÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ:</h3>

          <blockquote>
            <strong>Immutable Objects = Thread-Safe by Default</strong><br />
            Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„Ù€ Synchronization Ù„Ø£Ù†Ù‡ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„Ù‡Ø§
          </blockquote>

          <div dir="ltr">
            <pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Mutable Object (Race Condition)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚   Thread A               Shared Object          â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚   Read: 100             counter = 100           â”‚
â”‚   Calculate: 101                                â”‚
â”‚                         Thread B                â”‚
â”‚                         â”€â”€â”€â”€â”€â”€â”€â”€                â”‚
â”‚                         Read: 100               â”‚
â”‚                         Calculate: 101          â”‚
â”‚   Write: 101            counter = 101           â”‚
â”‚                         Write: 101              â”‚
â”‚                                                 â”‚
â”‚   âŒ Expected: 102, Got: 101 (Lost Update!)    â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
          </div>

          <h3>Ù…Ø«Ø§Ù„ ÙˆØ§Ù‚Ø¹ÙŠ: Ù…Ø´ÙƒÙ„Ø© Race Condition ÙÙŠ Android</h3>

          <div dir="ltr">
            <pre>// âŒ Mutable + Multi-Threading = ÙƒØ§Ø±Ø«Ø©
class UserRepository {
    private var cachedUsers: MutableList&lt;User&gt; = mutableListOf()
    
    fun addUser(user: User) {
        // ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ¯Ø¹Ø§Ø¤Ù‡Ø§ Ù…Ù† Threads Ù…Ø®ØªÙ„ÙØ©
        cachedUsers.add(user)  // âš ï¸ Not Thread-Safe!
    }
    
    fun getUsers(): List&lt;User&gt; {
        return cachedUsers  // âš ï¸ Ù‚Ø¯ ÙŠØªØºÙŠØ± Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©!
    }
}

// Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„ÙƒØ§Ø±Ø«ÙŠ:
// Thread 1 (Main): ÙŠÙ‚Ø±Ø£ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ø¹Ø±Ø¶Ù‡Ø§ ÙÙŠ RecyclerView
// Thread 2 (Background): ÙŠØ¶ÙŠÙ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯
// Ø§Ù„Ù†ØªÙŠØ¬Ø©: ConcurrentModificationException Ø£Ùˆ IndexOutOfBoundsException</pre>
          </div>

          <h3>Ø§Ù„Ø­Ù„: Ø§Ø³ØªØ®Ø¯Ø§Ù… Immutable Collections</h3>

          <div dir="ltr">
            <pre>// âœ… Immutable + Thread-Safe
class UserRepository {
    private var cachedUsers: List&lt;User&gt; = emptyList()
    private val lock = Any()
    
    fun addUser(user: User) {
        synchronized(lock) {
            cachedUsers = cachedUsers + user  // Ù†Ø³Ø®Ø© Ø¬Ø¯ÙŠØ¯Ø©
        }
    }
    
    fun getUsers(): List&lt;User&gt; {
        return cachedUsers  // Ø¢Ù…Ù† Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© Ø¨Ø¯ÙˆÙ† lock
    }
}

// Ø£Ùˆ Ø§Ù„Ø£ÙØ¶Ù„: Ø§Ø³ØªØ®Ø¯Ø§Ù… StateFlow (Kotlin Coroutines)
class UserRepository {
    private val _users = MutableStateFlow&lt;List&lt;User&gt;&gt;(emptyList())
    val users: StateFlow&lt;List&lt;User&gt;&gt; = _users.asStateFlow()
    
    fun addUser(user: User) {
        _users.update { currentList -&gt; currentList + user }
        // update() thread-safe Ø¯Ø§Ø®Ù„ÙŠÙ‹Ø§
    }
}</pre>
          </div>

          <hr />

          <h2>Immutability ÙÙŠ Android ØªØ­Ø¯ÙŠØ¯Ù‹Ø§ ğŸ“±</h2>

          <h3>1. Android Lifecycle ÙˆØªØºÙŠØ± Configuration</h3>

          <div dir="ltr">
            <pre>// âŒ Ù…Ø´ÙƒÙ„Ø© Ø´Ø§Ø¦Ø¹Ø©: Mutable State ÙÙŠ ViewModel
class UserViewModel : ViewModel() {
    val user = MutableLiveData&lt;User&gt;()
    
    fun updateName(newName: String) {
        user.value?.name = newName  // âš ï¸ ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¨Ø§Ø´Ø±!
        // LiveData Ù„Ù† ÙŠÙØ·Ù„Ù‚ notification Ù„Ø£Ù† Ø§Ù„Ù€ reference Ù„Ù… ÙŠØªØºÙŠØ±
    }
}

// âœ… Ø§Ù„Ø­Ù„ Ø§Ù„ØµØ­ÙŠØ­:
class UserViewModel : ViewModel() {
    private val _user = MutableLiveData&lt;User&gt;()
    val user: LiveData&lt;User&gt; = _user
    
    fun updateName(newName: String) {
        val currentUser = _user.value ?: return
        _user.value = currentUser.copy(name = newName)  // Ù†Ø³Ø®Ø© Ø¬Ø¯ÙŠØ¯Ø©
    }
}</pre>
          </div>

          <h3>2. Jetpack Compose ÙˆÙ†Ø¸Ø§Ù… Recomposition</h3>

          <div dir="ltr">
            <pre>// âŒ Compose Ù„Ù† ÙŠÙØ¹ÙŠØ¯ Ø§Ù„Ø±Ø³Ù…!
@Composable
fun UserProfile(user: User) {
    Text(text = user.name)
}

// ÙÙŠ Ù…ÙƒØ§Ù† Ø¢Ø®Ø±:
val user = User(name = "Ahmed", age = 25)
user.name = "Ali"  // ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¨Ø§Ø´Ø±
// Compose Ù„Ø§ ÙŠØ¹Ø±Ù Ø£Ù† user ØªØºÙŠØ±!


// âœ… Ø§Ù„Ø­Ù„: Immutable Data Class
data class User(val name: String, val age: Int)

@Composable
fun UserProfile(user: User) {
    Text(text = user.name)
}

// Compose State:
var user by remember { mutableStateOf(User("Ahmed", 25)) }
user = user.copy(name = "Ali")  // ÙŠÙØ·Ù„Ù‚ recomposition</pre>
          </div>

          <h3>3. Room Database ÙˆØ§Ù„Ù€ Entities</h3>

          <div dir="ltr">
            <pre>// âœ… Room ÙŠÙÙØ¶Ù‘Ù„ Immutable Entities
@Entity(tableName = "users")
data class UserEntity(
    @PrimaryKey val id: String,
    val name: String,
    val email: String,
    val createdAt: Long
)

// Ù„Ù…Ø§Ø°Ø§ ImmutableØŸ
// 1. Thread-Safe Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© Ù…Ù† Background Thread
// 2. Cache ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ (Ø§Ù„Ù€ reference ÙŠØªØºÙŠØ± Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ«)
// 3. ÙŠÙ…Ù†Ø¹ ØªØ¹Ø¯ÙŠÙ„ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª</pre>
          </div>

          <hr />

          <h2>Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø§Ù„ØªÙŠ ØªØ­Ø¯Ø« Ø¨Ø³Ø¨Ø¨ Mutability âš ï¸</h2>

          <h3>Ù…Ø´ÙƒÙ„Ø© 1: Memory Leaks Ù…Ù† Mutable Listeners</h3>

          <div dir="ltr">
            <pre>// âŒ Ù…Ø´ÙƒÙ„Ø© ÙˆØ§Ù‚Ø¹ÙŠØ© ÙÙŠ Android
class MainActivity : AppCompatActivity() {
    private val listeners = mutableListOf&lt;OnDataChangeListener&gt;()
    
    fun registerListener(listener: OnDataChangeListener) {
        listeners.add(listener)
    }
    
    fun unregisterListener(listener: OnDataChangeListener) {
        listeners.remove(listener)  // âš ï¸ Ù‚Ø¯ Ù„Ø§ ÙŠÙØ­Ø°Ù!
    }
    
    override fun onDestroy() {
        super.onDestroy()
        // Ø¥Ø°Ø§ Ù†Ø³ÙŠØª unregister â†’ Memory Leak
    }
}

// âœ… Ø­Ù„ Ø£ÙØ¶Ù„: Immutable + WeakReference
class DataObserver {
    private var listeners: List&lt;WeakReference&lt;OnDataChangeListener&gt;&gt; = emptyList()
    
    fun registerListener(listener: OnDataChangeListener) {
        listeners = listeners + WeakReference(listener)
    }
    
    fun notifyChange() {
        listeners = listeners.filter { it.get() != null }  // ØªÙ†Ø¸ÙŠÙ ØªÙ„Ù‚Ø§Ø¦ÙŠ
        listeners.forEach { it.get()?.onDataChanged() }
    }
}</pre>
          </div>

          <h3>Ù…Ø´ÙƒÙ„Ø© 2: Unexpected Behavior ÙÙŠ Collections</h3>

          <div dir="ltr">
            <pre>// âŒ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ ÙƒØ§Ø±Ø«ÙŠ Ø­Ù‚ÙŠÙ‚ÙŠ
fun processOrders(orders: MutableList&lt;Order&gt;) {
    orders.forEach { order -&gt;
        if (order.status == "pending") {
            orders.remove(order)  // âš ï¸ ConcurrentModificationException!
        }
    }
}

// âœ… Ø§Ù„Ø­Ù„:
fun processOrders(orders: List&lt;Order&gt;): List&lt;Order&gt; {
    return orders.filter { it.status != "pending" }
}</pre>
          </div>

          <h3>Ù…Ø´ÙƒÙ„Ø© 3: State Corruption ÙÙŠ Coroutines</h3>

          <div dir="ltr">
            <pre>// âŒ Ù…Ø´ÙƒÙ„Ø© Ø®Ø·ÙŠØ±Ø© ÙÙŠ Production
class CartViewModel : ViewModel() {
    private val _items = mutableListOf&lt;CartItem&gt;()
    
    fun addItem(item: CartItem) {
        viewModelScope.launch {
            delay(100)  // Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ù…Ù„ÙŠØ© async
            _items.add(item)  // âš ï¸ Not Thread-Safe!
        }
    }
    
    fun getTotalPrice(): Double {
        return _items.sumOf { it.price }  // âš ï¸ Ù‚Ø¯ ÙŠÙ‚Ø±Ø£ state Ù†Ø§Ù‚Øµ!
    }
}

// Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ:
// User ÙŠÙ†Ù‚Ø± "Add to Cart" 3 Ù…Ø±Ø§Øª Ø¨Ø³Ø±Ø¹Ø©
// 3 Coroutines ØªÙØ·Ù„Ù‚ Ø¨Ø§Ù„ØªÙˆØ§Ø²ÙŠ
// Ø§Ù„Ù†ØªÙŠØ¬Ø©: Ø¨Ø¹Ø¶ Ø§Ù„Ù€ items ØªÙÙÙ‚Ø¯!


// âœ… Ø§Ù„Ø­Ù„: Immutable + Atomic Updates
class CartViewModel : ViewModel() {
    private val _items = MutableStateFlow&lt;List&lt;CartItem&gt;&gt;(emptyList())
    val items: StateFlow&lt;List&lt;CartItem&gt;&gt; = _items.asStateFlow()
    
    fun addItem(item: CartItem) {
        viewModelScope.launch {
            delay(100)
            _items.update { currentList -&gt; currentList + item }
            // update() thread-safe Ùˆ atomic
        }
    }
    
    fun getTotalPrice(): Double {
        return _items.value.sumOf { it.price }
    }
}</pre>
          </div>

          <hr />

          <h2>Ø£Ù…Ø«Ù„Ø© Ø¹Ù…Ù„ÙŠØ© Ù…Ù† Android Development ğŸ”§</h2>

          <h3>Ù…Ø«Ø§Ù„ 1: Navigation Arguments</h3>

          <div dir="ltr">
            <pre>// âŒ Ø®Ø·Ø£ Ø´Ø§Ø¦Ø¹ ÙÙŠ Navigation
@Parcelize
data class UserProfile(
    var name: String,  // âš ï¸ var = mutable
    var email: String
) : Parcelable

// ÙÙŠ Fragment A:
val user = UserProfile("Ahmed", "ahmed@test.com")
findNavController().navigate(
    R.id.profileFragment,
    bundleOf("user" to user)
)
user.name = "Ali"  // âš ï¸ ØªØ¹Ø¯ÙŠÙ„ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„!


// âœ… Ø§Ù„Ø­Ù„:
@Parcelize
data class UserProfile(
    val name: String,  // âœ… val = immutable
    val email: String
) : Parcelable</pre>
          </div>

          <h3>Ù…Ø«Ø§Ù„ 2: Repository Pattern</h3>

          <div dir="ltr">
            <pre>// âŒ Anti-Pattern
class ProductRepository {
    private val cache = mutableMapOf&lt;String, Product&gt;()
    
    suspend fun getProduct(id: String): Product? {
        return cache[id] ?: fetchFromNetwork(id)?.also {
            cache[id] = it  // âš ï¸ Ø®Ø·Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù€ cache
        }
    }
    
    suspend fun updateProduct(product: Product) {
        cache[product.id] = product  // âš ï¸ ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¨Ø§Ø´Ø±
        updateOnServer(product)
    }
}

// Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø£ÙŠ Ù…ÙƒØ§Ù† ÙŠØ­ØµÙ„ Ø¹Ù„Ù‰ Product ÙŠÙ…ÙƒÙ†Ù‡ ØªØ¹Ø¯ÙŠÙ„Ù‡
val product = repository.getProduct("123")
product?.price = 0.0  // âš ï¸ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù€ cache!


// âœ… Ø§Ù„Ø­Ù„ Ø§Ù„ØµØ­ÙŠØ­:
class ProductRepository {
    private var cache: Map&lt;String, Product&gt; = emptyMap()
    private val cacheMutex = Mutex()
    
    suspend fun getProduct(id: String): Product? {
        cacheMutex.withLock {
            return cache[id] ?: fetchFromNetwork(id)?.also { product -&gt;
                cache = cache + (id to product)  // Ù†Ø³Ø®Ø© Ø¬Ø¯ÙŠØ¯Ø©
            }
        }
    }
    
    suspend fun updateProduct(product: Product) {
        cacheMutex.withLock {
            cache = cache + (product.id to product)
        }
        updateOnServer(product)
    }
}</pre>
          </div>

          <h3>Ù…Ø«Ø§Ù„ 3: RecyclerView ÙˆØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</h3>

          <div dir="ltr">
            <pre>// âŒ Ù…Ø´ÙƒÙ„Ø© Ø´Ø§Ø¦Ø¹Ø© Ø¬Ø¯Ù‹Ø§
class ProductAdapter : RecyclerView.Adapter&lt;ProductViewHolder&gt;() {
    private val items = mutableListOf&lt;Product&gt;()
    
    fun updateItems(newItems: List&lt;Product&gt;) {
        items.clear()
        items.addAll(newItems)
        notifyDataSetChanged()  // âš ï¸ ØºÙŠØ± ÙØ¹Ù‘Ø§Ù„
    }
}

// Ø§Ù„Ù…Ø´Ø§ÙƒÙ„:
// 1. notifyDataSetChanged() ÙŠÙØ¹ÙŠØ¯ Ø±Ø³Ù… ÙƒÙ„ Ø´ÙŠØ¡
// 2. Ù„Ø§ ÙŠØ¯Ø¹Ù… Animations
// 3. Performance Ø³ÙŠØ¡


// âœ… Ø§Ù„Ø­Ù„: ListAdapter Ù…Ø¹ DiffUtil
class ProductAdapter : ListAdapter&lt;Product, ProductViewHolder&gt;(ProductDiffCallback()) {
    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ProductViewHolder {
        // ...
    }
    
    override fun onBindViewHolder(holder: ProductViewHolder, position: Int) {
        holder.bind(getItem(position))
    }
}

class ProductDiffCallback : DiffUtil.ItemCallback&lt;Product&gt;() {
    override fun areItemsTheSame(oldItem: Product, newItem: Product): Boolean {
        return oldItem.id == newItem.id
    }
    
    override fun areContentsTheSame(oldItem: Product, newItem: Product): Boolean {
        return oldItem == newItem  // ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ Ù…Ø¹ Immutable Data Class
    }
}

// Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:
adapter.submitList(newProducts)  // âœ… DiffUtil ÙŠØ­Ø³Ø¨ Ø§Ù„ÙØ±Ù‚ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§</pre>
          </div>

          <hr />

          <h2>Best Practices ÙˆØ§Ù„Ø­Ù„ÙˆÙ„ ğŸ¯</h2>

          <h3>1. Ø§Ø³ØªØ®Ø¯Ù… Data Classes Ù…Ø¹ val</h3>

          <div dir="ltr">
            <pre>// âœ… Ù‚Ø§Ø¹Ø¯Ø© Ø°Ù‡Ø¨ÙŠØ©
data class User(
    val id: String,
    val name: String,
    val email: String,
    val profileImage: String?
)

// Ø§Ù„ØªØ¹Ø¯ÙŠÙ„:
val updatedUser = user.copy(name = "New Name")</pre>
          </div>

          <h3>2. Collections: Ø§Ø³ØªØ®Ø¯Ù… Immutable Ø¨Ø´ÙƒÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠ</h3>

          <div dir="ltr">
            <pre>// âŒ ØªØ¬Ù†Ø¨:
val list = mutableListOf&lt;String&gt;()

// âœ… Ø§Ø³ØªØ®Ø¯Ù…:
val list = listOf&lt;String&gt;()  // Ø£Ùˆ emptyList()

// âœ… Ø¥Ø°Ø§ Ø§Ø­ØªØ¬Øª mutability Ø¯Ø§Ø®Ù„ class:
class DataManager {
    private val _items = mutableListOf&lt;Item&gt;()
    val items: List&lt;Item&gt; get() = _items.toList()  // Ù†Ø³Ø®Ø© immutable
    
    fun addItem(item: Item) {
        _items.add(item)
    }
}</pre>
          </div>

          <h3>3. Android State Management</h3>

          <div dir="ltr">
            <pre>// âœ… ÙÙŠ ViewModel
class MyViewModel : ViewModel() {
    // Immutable Ù„Ù„Ø®Ø§Ø±Ø¬
    private val _uiState = MutableStateFlow(UiState())
    val uiState: StateFlow&lt;UiState&gt; = _uiState.asStateFlow()
    
    fun updateUser(user: User) {
        _uiState.update { currentState -&gt;
            currentState.copy(user = user)  // Ù†Ø³Ø®Ø© Ø¬Ø¯ÙŠØ¯Ø©
        }
    }
}

data class UiState(
    val user: User? = null,
    val isLoading: Boolean = false,
    val error: String? = null
)</pre>
          </div>

          <h3>4. Sealed Classes Ù„Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©</h3>

          <div dir="ltr">
            <pre>// âœ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Sealed Class Ù…Ø¹ Immutable Data
sealed class NetworkResult&lt;out T&gt; {
    data class Success&lt;T&gt;(val data: T) : NetworkResult&lt;T&gt;()
    data class Error(val exception: Exception) : NetworkResult&lt;Nothing&gt;()
    object Loading : NetworkResult&lt;Nothing&gt;()
}

// ÙÙŠ Repository:
suspend fun fetchUser(id: String): NetworkResult&lt;User&gt; {
    return try {
        val user = api.getUser(id)
        NetworkResult.Success(user)  // Immutable
    } catch (e: Exception) {
        NetworkResult.Error(e)
    }
}</pre>
          </div>

          <hr />

          <h2>Ù…Ù‚Ø§Ø±Ù†Ø© Ø´Ø§Ù…Ù„Ø© ğŸ“Š</h2>

          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ù…Ø¹ÙŠØ§Ø±</th>
                <th>Mutable</th>
                <th>Immutable</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Thread Safety</strong></td>
                <td>âŒ ÙŠØ­ØªØ§Ø¬ Synchronization</td>
                <td>âœ… Ø¢Ù…Ù† Ø¨Ø´ÙƒÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠ</td>
              </tr>
              <tr>
                <td><strong>Performance</strong></td>
                <td>âœ… Ø£Ø³Ø±Ø¹ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©</td>
                <td>âš ï¸ ÙŠÙ†Ø´Ø¦ Ù†Ø³Ø® Ø¬Ø¯ÙŠØ¯Ø©</td>
              </tr>
              <tr>
                <td><strong>Memory</strong></td>
                <td>âœ… ÙŠØ³ØªÙ‡Ù„Ùƒ Ø£Ù‚Ù„</td>
                <td>âš ï¸ Ù†Ø³Ø® Ù…ØªØ¹Ø¯Ø¯Ø© Ù…Ø¤Ù‚ØªØ©</td>
              </tr>
              <tr>
                <td><strong>Debugging</strong></td>
                <td>âŒ ØµØ¹Ø¨ ØªØªØ¨Ø¹ Ù…Ù† Ø¹Ø¯Ù‘Ù„</td>
                <td>âœ… Ø³Ù‡Ù„ Ø§Ù„ØªØªØ¨Ø¹</td>
              </tr>
              <tr>
                <td><strong>Testing</strong></td>
                <td>âŒ State ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹</td>
                <td>âœ… Predictable</td>
              </tr>
              <tr>
                <td><strong>Caching</strong></td>
                <td>âŒ Cache Ù‚Ø¯ ÙŠÙØ³Ø¯</td>
                <td>âœ… Ø¢Ù…Ù† Ù„Ù„Ù€ Cache</td>
              </tr>
              <tr>
                <td><strong>Compose</strong></td>
                <td>âŒ Ù„Ø§ ÙŠÙØ·Ù„Ù‚ Recomposition</td>
                <td>âœ… ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­</td>
              </tr>
            </tbody>
          </table>

          <hr />

          <h2>Ù…ØªÙ‰ ØªØ³ØªØ®Ø¯Ù… ÙƒÙ„ Ù…Ù†Ù‡Ù…Ø§ØŸ ğŸ¤”</h2>

          <h3>Ø§Ø³ØªØ®Ø¯Ù… Immutable Ø¹Ù†Ø¯Ù…Ø§:</h3>
          <ul>
            <li>ØªØ¹Ù…Ù„ Ù…Ø¹ <strong>Multi-Threading</strong></li>
            <li>State Management ÙÙŠ <strong>ViewModel</strong></li>
            <li>Data Classes ÙÙŠ <strong>Model Layer</strong></li>
            <li><strong>Navigation Arguments</strong></li>
            <li><strong>Jetpack Compose State</strong></li>
            <li><strong>Cache Keys</strong> ÙÙŠ HashMap</li>
            <li>Ø£ÙŠ data ÙŠÙØ´Ø§Ø±Ùƒ Ø¨ÙŠÙ† Ø£ÙƒØ«Ø± Ù…Ù† Ù…ÙƒÙˆÙ†</li>
          </ul>

          <h3>Ø§Ø³ØªØ®Ø¯Ù… Mutable Ø¹Ù†Ø¯Ù…Ø§:</h3>
          <ul>
            <li>Performance Critical (Ù…Ø«Ù„ Game Loop)</li>
            <li>Ø¨Ù†Ø§Ø¡ Collections ÙƒØ¨ÙŠØ±Ø© Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©</li>
            <li>Ø¯Ø§Ø®Ù„ Scope Ù…Ø­Ø¯ÙˆØ¯ ÙˆØ¢Ù…Ù†</li>
            <li>StringBuilder Ù„Ù„Ù†ØµÙˆØµ Ø§Ù„Ø·ÙˆÙŠÙ„Ø©</li>
          </ul>

          <div class="warning">
            <strong>âš ï¸ Ù‚Ø§Ø¹Ø¯Ø© Ù…Ù‡Ù…Ø©:</strong><br />
            Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ÙƒØ§Ø¦Ù† ÙŠÙØ´Ø§Ø±Ùƒ Ø£Ùˆ ÙŠÙÙ…Ø±Ø± Ø®Ø§Ø±Ø¬ Scope Ø§Ù„Ø­Ø§Ù„ÙŠ:<br />
            â†’ Ø§Ø³ØªØ®Ø¯Ù… <strong>Immutable</strong><br />
            <br />
            Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø­ØµÙˆØ±Ù‹Ø§ Ø¯Ø§Ø®Ù„ Ø¯Ø§Ù„Ø© ÙˆØ§Ø­Ø¯Ø© ÙˆÙ‚ØµÙŠØ±Ø©:<br />
            â†’ ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… <strong>Mutable</strong>
          </div>

          <hr />

          <h2>Ø§Ù„Ø®Ù„Ø§ØµØ© ğŸ“</h2>

          <blockquote>
            <strong>Immutability Ù„ÙŠØ³Øª ØªØ±ÙÙ‹Ø§ØŒ Ø¨Ù„ Ø¶Ø±ÙˆØ±Ø© ÙÙŠ Android Ø§Ù„Ø­Ø¯ÙŠØ«</strong><br />
            <br />
            Ø§Ù„Ø³Ø¨Ø¨:<br />
            â€¢ Android ÙŠØ¹Ù…Ù„ Ø¨Ù€ Multi-Threading Ø¨Ø·Ø¨ÙŠØ¹ØªÙ‡<br />
            â€¢ Lifecycle Events ØªØ­Ø¯Ø« Ø¨Ø´ÙƒÙ„ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹<br />
            â€¢ Configuration Changes ØªÙØ¹ÙŠØ¯ Ø¥Ù†Ø´Ø§Ø¡ Components<br />
            â€¢ Compose ÙˆState Management ÙŠØ¹ØªÙ…Ø¯Ø§Ù† Ø¹Ù„Ù‰ Immutability<br />
            <br />
            <strong>Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨Ø³ÙŠØ·Ø©:</strong><br />
            Mutable = Shared State = Ù…ØµØ¯Ø± Ù„Ù„Ù…Ø´Ø§ÙƒÙ„<br />
            Immutable = Predictable State = Stable App
          </blockquote>

          <h3>Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø¬ÙˆÙ‡Ø±ÙŠØ©:</h3>

          <div dir="ltr">
            <pre>âœ“ Immutable Objects Ø¢Ù…Ù†Ø© Ù„Ù„Ù€ Multi-Threading Ø¨Ø¯ÙˆÙ† locks
âœ“ val Ù„Ø§ ØªØ¹Ù†ÙŠ Immutable Ø¯Ø§Ø¦Ù…Ù‹Ø§ (ÙÙ‚Ø· Ø§Ù„Ù€ reference Ø«Ø§Ø¨Øª)
âœ“ Data Classes Ù…Ø¹ val properties = Best Practice
âœ“ Ø§Ø³ØªØ®Ø¯Ù… copy() Ù„Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª
âœ“ Collections: Ø§Ø³ØªØ®Ø¯Ù… List Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† MutableList ÙƒÙ€ default
âœ“ ÙÙŠ ViewModel: MutableStateFlow Ø¯Ø§Ø®Ù„ÙŠØŒ StateFlow Ù„Ù„Ø®Ø§Ø±Ø¬
âœ“ Compose ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Immutability Ù„Ù„Ù€ Recomposition
âœ“ DiffUtil ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„ Ù…Ø¹ Immutable Objects</pre>
          </div>

          <h3>Ø§Ù„ÙØ±Ù‚ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø¨ØªØ¯Ø¦ ÙˆØ§Ù„Ù…Ø­ØªØ±Ù:</h3>

          <table>
            <thead>
              <tr>
                <th>Ø§Ù„Ù…Ø¨ØªØ¯Ø¦</th>
                <th>Ø§Ù„Ù…Ø­ØªØ±Ù</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>ÙŠØ³ØªØ®Ø¯Ù… var Ùˆ MutableList ÙÙŠ ÙƒÙ„ Ù…ÙƒØ§Ù†</td>
                <td>ÙŠØ³ØªØ®Ø¯Ù… val Ùˆ Immutable Collections ÙƒÙ€ default</td>
              </tr>
              <tr>
                <td>ÙŠØ¹Ø¯Ù‘Ù„ Objects Ø¨Ø´ÙƒÙ„ Ù…Ø¨Ø§Ø´Ø±</td>
                <td>ÙŠÙ†Ø´Ø¦ Ù†Ø³Ø® Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ù€ copy()</td>
              </tr>
              <tr>
                <td>Ù„Ø§ ÙŠÙÙ‡Ù… Ù„Ù…Ø§Ø°Ø§ Compose Ù„Ø§ ÙŠÙØ¹ÙŠØ¯ Ø§Ù„Ø±Ø³Ù…</td>
                <td>ÙŠØ¹Ø±Ù Ø£Ù† State ÙŠØ¬Ø¨ Ø£Ù† ÙŠØªØºÙŠØ± reference-wise</td>
              </tr>
              <tr>
                <td>ÙŠØ­ØµÙ„ Ø¹Ù„Ù‰ ConcurrentModificationException</td>
                <td>ÙŠØ³ØªØ®Ø¯Ù… Immutable Collections Ù…Ø¹ Threads</td>
              </tr>
              <tr>
                <td>ÙŠÙˆØ§Ø¬Ù‡ Race Conditions ØºØ§Ù…Ø¶Ø©</td>
                <td>ÙŠØ­Ù…ÙŠ State Ø¨Ù€ Immutability + Atomic Updates</td>
              </tr>
            </tbody>
          </table>

          <hr />

          <h2>Ø£Ø³Ø¦Ù„Ø© Ø´Ø§Ø¦Ø¹Ø© (FAQ) ğŸ’­</h2>

          <h3>Ø³1: Ù‡Ù„ Immutability ØªØ¤Ø«Ø± Ø¹Ù„Ù‰ PerformanceØŸ</h3>
          <p>
            <strong>Ø§Ù„Ø¬ÙˆØ§Ø¨:</strong> ÙÙŠ Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©: <strong>Ù„Ø§</strong>ØŒ Ø§Ù„ØªØ£Ø«ÙŠØ± Ø¶Ø¦ÙŠÙ„ Ø¬Ø¯Ù‹Ø§.<br />
            Kotlin ØªØ³ØªØ®Ø¯Ù… <strong>Structural Sharing</strong> ÙÙŠ Collections Ø§Ù„ÙƒØ¨ÙŠØ±Ø©.<br />
            Ø§Ù„Ù€ GC Ø§Ù„Ø­Ø¯ÙŠØ« Ø³Ø±ÙŠØ¹ ÙÙŠ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ù…Ø¤Ù‚ØªØ©.<br />
            <br />
            Ù…ØªÙ‰ ØªÙ‡ØªÙ…ØŸ ÙÙ‚Ø· ÙÙŠ:<br />
            â€¢ Game Loops (60 FPS)<br />
            â€¢ Ù…Ø¹Ø§Ù„Ø¬Ø© Bitmaps ÙƒØ¨ÙŠØ±Ø©<br />
            â€¢ Ø¹Ù…Ù„ÙŠØ§Øª Ù…ØªÙƒØ±Ø±Ø© Ø¬Ø¯Ù‹Ø§ (Ù…Ø¦Ø§Øª Ø§Ù„Ù…Ø±Ø§Øª/Ø«Ø§Ù†ÙŠØ©)
          </p>

          <h3>Ø³2: Ù…Ø§Ø°Ø§ Ø¹Ù† Ø§Ù„Ù€ Deep CopyØŸ</h3>
          <div dir="ltr">
            <pre>// Ù…Ø´ÙƒÙ„Ø©: copy() Ø³Ø·Ø­ÙŠ ÙÙ‚Ø·
data class User(
    val name: String,
    val address: Address  // Object Ø¢Ø®Ø±
)

val user1 = User("Ahmed", Address("Cairo"))
val user2 = user1.copy()
user2.address.city = "Alex"  // âš ï¸ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ user1 Ø£ÙŠØ¶Ù‹Ø§!

// Ø§Ù„Ø­Ù„:
data class User(
    val name: String,
    val address: Address
) {
    fun deepCopy() = copy(address = address.copy())
}

// Ø£Ùˆ Ø§Ù„Ø£ÙØ¶Ù„: Ø§Ø¬Ø¹Ù„ Address immutable Ø£ÙŠØ¶Ù‹Ø§
data class Address(val city: String)  // val = immutable</pre>
          </div>

          <h3>Ø³3: ÙƒÙŠÙ Ø£ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ APIs ØªØ±Ø¬Ø¹ Mutable ObjectsØŸ</h3>
          <div dir="ltr">
            <pre>// Ù…Ø«Ø§Ù„: Gson ÙŠÙ†Ø´Ø¦ Objects Ø¨Ù€ var
data class ApiUser(
    var id: String,
    var name: String
)

// Ø§Ù„Ø­Ù„: Data Transfer Object + Mapper
data class ApiUser(var id: String, var name: String)  // Ù„Ù„Ù€ API ÙÙ‚Ø·

data class User(val id: String, val name: String)  // Domain Model

fun ApiUser.toDomain() = User(id = id, name = name)</pre>
          </div>

          <h3>Ø³4: Ù…Ø§Ø°Ø§ Ø¹Ù† ParcelizeØŸ</h3>
          <div dir="ltr">
            <pre>// âœ… Parcelize ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø±Ø§Ø¦Ø¹ Ù…Ø¹ Immutable
@Parcelize
data class User(
    val id: String,
    val name: String
) : Parcelable

// ÙŠÙÙ…Ø±Ø± Ø¨Ø£Ù…Ø§Ù† Ø¨ÙŠÙ† Activities/Fragments</pre>
          </div>

          <hr />

          <h2>Ù†ØµØ§Ø¦Ø­ Ø¹Ù…Ù„ÙŠØ© Ù†Ù‡Ø§Ø¦ÙŠØ© ğŸ’¡</h2>

          <div class="success">
            <strong>âœ¨ Ù‚ÙˆØ§Ø¹Ø¯ Ø°Ù‡Ø¨ÙŠØ©:</strong><br />
            <br />
            1. <strong>Default to Immutable</strong> - Ø§Ø³ØªØ®Ø¯Ù… Immutable Ù…Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø³Ø¨Ø¨ Ù‚ÙˆÙŠ<br />
            2. <strong>Expose Immutable APIs</strong> - Ø§Ù„Ù€ public API ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† immutable<br />
            3. <strong>Mutable Internally, Immutable Externally</strong> - Ù†Ù…Ø· Ø´Ø§Ø¦Ø¹ ÙˆØ¢Ù…Ù†<br />
            4. <strong>Copy, Don't Modify</strong> - Ø£Ù†Ø´Ø¦ Ù†Ø³Ø® Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„ØªØ¹Ø¯ÙŠÙ„<br />
            5. <strong>Trust the Tools</strong> - Ø§Ø³ØªØ®Ø¯Ù… StateFlow, DiffUtil, Data Classes<br />
            <br />
            <strong>ØªØ°ÙƒÙ‘Ø±:</strong><br />
            ÙƒÙ„ Bug Ù…Ø¹Ù‚Ø¯ ÙÙŠ Android ÙŠÙ…ÙƒÙ† ØªØ¬Ù†Ø¨Ù‡ Ø¨Ù€ Immutability âœ…
          </div>

        </div>
      </div>
    </div>
  </div>
</body>
</html>